import{_ as pl,r as _,v as Ae,x as $,y as vl,z as ml,A as S,c as k,w as s,B as fl,a as _l,o as i,b as a,V as gl,C as u,d as yl,e as xl,D as hl,F as D,E as p,l as m,G as z,H as F,I as V,h as n,J as d,t as r,s as B,K as bl,p as A,L as oe,M as we,f as M,N as ee,O as P,P as K,Q as G,k as U,R,S as ke,T as wl,i as Ce,U as $e,W as kl,g as Ee,m as Cl,q as Oe,X as $l,Y as Sl,Z as Dl,$ as Vl}from"./index-YNptfV--.js";import{u as Tl}from"./spaces-DBzeKANc.js";import{T as Fl,Q as Il,a as Ne}from"./TaskActionSheet-Yv6_h5OD.js";const zl={class:"mb-4"},Al={class:"d-flex align-center flex-wrap ga-2"},El={key:0,class:"mb-6"},Ol={key:1,class:"mb-6"},Nl={class:"d-flex align-center mb-3"},Ml={class:"d-flex align-center flex-wrap ga-2 mb-1"},Ul={key:0,class:"d-inline-flex align-center text-caption"},Ll={key:1,class:"d-inline-flex align-center text-caption"},Bl={class:"text-error text-caption"},Pl={key:0,class:"d-inline-flex align-center text-caption"},Kl={class:"d-inline-flex align-center text-caption"},Rl={class:"mb-6"},Jl={class:"d-flex align-center mb-3"},Wl={class:"d-flex align-center flex-wrap ga-2 mb-1"},Zl={key:0,class:"d-inline-flex align-center text-caption"},Hl={key:1,class:"d-inline-flex align-center text-caption"},Ql={key:0,class:"d-inline-flex align-center text-caption"},ql={key:1,class:"d-inline-flex align-center text-caption"},Gl={key:2,class:"mb-6"},Yl={class:"d-flex align-center flex-wrap ga-2 mb-1"},Xl={key:0,class:"d-inline-flex align-center text-caption"},jl={key:1,class:"d-inline-flex align-center text-caption"},et={class:"d-inline-flex align-center text-caption"},lt={key:0,class:"d-inline-flex align-center text-caption"},tt={class:"d-inline-flex align-center text-caption"},at={class:"d-flex align-center flex-wrap ga-2 mb-1"},st={key:0,class:"d-inline-flex align-center text-caption"},nt={key:1,class:"d-inline-flex align-center text-caption"},it={class:"d-inline-flex align-center text-caption"},ot={key:0,class:"d-inline-flex align-center text-caption"},rt={class:"d-inline-flex align-center text-caption"},ct={class:"d-flex align-center flex-wrap ga-2 mb-1"},ut={key:0,class:"d-inline-flex align-center text-caption"},dt={key:1,class:"d-inline-flex align-center text-caption"},pt={class:"d-inline-flex align-center text-caption"},vt={key:0,class:"d-inline-flex align-center text-caption"},mt={class:"d-inline-flex align-center text-caption"},ft={key:3,class:"mb-6"},_t={class:"d-flex align-center flex-wrap ga-2 mb-1"},gt={key:0,class:"d-inline-flex align-center text-caption"},yt={key:1,class:"d-inline-flex align-center text-caption"},xt={class:"text-body-2 text-medium-emphasis mb-3"},ht={class:"d-flex flex-wrap ga-2 mb-4"},bt={class:"d-flex align-center"},wt={key:0,class:"ml-8 mt-2"},kt={key:0,class:"text-caption text-medium-emphasis"},Ct={__name:"DashboardView",setup($t){const Me=_l(),b=Tl(),Ue=ml(),re=_(!1),x=_([]),I=_([]),E=_(!1),le=_(!1),ce=_(!1),ue=_(!1),Se=_(""),te=_(!1),J=_(!1),W=_(""),v=_(null),De=_(navigator.onLine),ae=_(!1),se=_(!1),ne=_(!0),f=_(!1),g=_(""),y=_("success"),O=_(2e3),N=_(!1),Y=_(null);window.addEventListener("online",()=>{De.value=!0}),window.addEventListener("offline",()=>{De.value=!1});const h=_([]),w=_([]);function Le(){const t=localStorage.getItem("dashboard-space-filter");if(t)try{h.value=JSON.parse(t)}catch{h.value=[]}else h.value=b.spaces.map(e=>e.id)}function de(){localStorage.setItem("dashboard-space-filter",JSON.stringify(h.value))}function Ve(t){const e=h.value.indexOf(t);e===-1?h.value.push(t):h.value.splice(e,1),de()}Ae(h,de,{deep:!0});function Be(){const t=localStorage.getItem("dashboard-category-filter");if(t)try{w.value=JSON.parse(t)}catch{w.value=[]}else w.value=I.value.map(e=>e.id)}function pe(){localStorage.setItem("dashboard-category-filter",JSON.stringify(w.value))}function Pe(t){const e=w.value.indexOf(t);e===-1?w.value.push(t):w.value.splice(e,1),pe()}Ae(w,pe,{deep:!0}),$(()=>h.value.length===0?I.value:I.value.filter(t=>h.value.includes(t.space_id)));function Te(t){return I.value.filter(e=>e.space_id===t)}const Ke=$(()=>{const t=h.value.length===b.spaces.length,e=w.value.length===I.value.length;return!t||!e});function Re(){h.value=b.spaces.map(t=>t.id),w.value=I.value.map(t=>t.id),de(),pe()}const L=$(()=>{let t=x.value.filter(e=>e.status==="active"&&e.task_type!=="inbox");return h.value.length>0&&(t=t.filter(e=>h.value.includes(e.space_id))),w.value.length>0&&(t=t.filter(e=>!e.category_id||w.value.includes(e.category_id))),t}),ve=$(()=>x.value.filter(t=>t.task_type==="inbox"&&t.status==="active"));function Je(t){switch(t){case"voice":return"mdi-microphone";case"manual":return"mdi-keyboard";default:return"mdi-inbox"}}function We(t){switch(t){case"voice":return"info";case"manual":return"grey";default:return"grey"}}async function Ze(t){try{await S.post(`/spaces/${t.space_id}/tasks/${t.id}/complete`,{}),x.value=x.value.filter(e=>!(e.space_id===t.space_id&&e.id===t.id)),g.value=`Erledigt: ${t.title}`,y.value="success",f.value=!0}catch(e){console.error("Failed to complete inbox item:",e),g.value="Fehler beim Erledigen",y.value="error",f.value=!0}}function He(t){v.value=t,le.value=!0}async function Qe(t){try{await S.delete(`/spaces/${t.space_id}/tasks/${t.id}`),x.value=x.value.filter(e=>!(e.space_id===t.space_id&&e.id===t.id)),g.value="Inbox-Eintrag gelöscht",y.value="success",f.value=!0}catch(e){console.error("Failed to delete inbox item:",e),g.value="Fehler beim Löschen",y.value="error",f.value=!0}}const me=$(()=>{let t=x.value.filter(e=>e.status==="inactive");return h.value.length>0&&(t=t.filter(e=>h.value.includes(e.space_id))),w.value.length>0&&(t=t.filter(e=>!e.category_id||w.value.includes(e.category_id))),t});function X(t){return t.sort((e,o)=>!e.has_specific_time&&o.has_specific_time?-1:e.has_specific_time&&!o.has_specific_time?1:e.has_specific_time&&o.has_specific_time?e.time_of_day.localeCompare(o.time_of_day):0)}$(()=>{const t=new Date().toISOString().split("T")[0];return L.value.filter(e=>e.has_specific_time&&e.next_due_date===t).sort((e,o)=>e.time_of_day.localeCompare(o.time_of_day))});const fe=$(()=>{const t=L.value.filter(e=>e.is_overdue&&!Ie(e));return X(t)}),_e=$(()=>{const t=new Date().toISOString().split("T")[0],e=L.value.filter(o=>o.task_type==="one_time"&&!o.next_due_date&&!o.is_overdue?!0:!o.is_overdue&&o.next_due_date===t&&!Ie(o));return X(e)}),ge=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1);const o=e.toISOString().split("T")[0],l=L.value.filter(c=>c.next_due_date===o);return X(l)}),ye=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1);const o=new Date(t);o.setDate(o.getDate()+7);const l=e.toISOString().split("T")[0],c=o.toISOString().split("T")[0],T=L.value.filter(C=>C.next_due_date>l&&C.next_due_date<=c);return X(T)}),xe=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+7);const o=e.toISOString().split("T")[0],l=L.value.filter(c=>c.next_due_date>o);return X(l)}),Fe=$(()=>{const t=new Date().toISOString().split("T")[0];return L.value.filter(e=>e.next_due_date>t)});function Ie(t){const e=new Date().toISOString().split("T")[0];return t.has_specific_time&&t.next_due_date===e}function qe(t){return t<=1?"#FFCDD2":t<=2?"#EF9A9A":t<=3?"#E57373":t<=5?"#EF5350":"#D32F2F"}function Ge(t){return t<=2?"#000000":"#FFFFFF"}const Z=$(()=>b.spaces.length===0?null:b.spaces[0].id);$(()=>Z.value?I.value.filter(t=>t.space_id===Z.value):[]);function Ye(){ue.value=!0}async function Xe(t){const e=t.space_id||Z.value;if(!e){g.value="Kein Space verfügbar",y.value="error",f.value=!0;return}try{const o=await S.post(`/spaces/${e}/tasks`,{title:t.title,task_type:"inbox"});await H(),g.value="Zur Inbox hinzugefügt",y.value="success",O.value=2e3,N.value=!1,f.value=!0}catch(o){console.error("Failed to add to inbox:",o),g.value="Fehler beim Hinzufügen",y.value="error",f.value=!0}}function je(t){Se.value=t||"",ce.value=!0}vl(async()=>{await H(),Le(),Be(),Ue.on("dashboard:refresh",H)});async function H(){re.value=!0;try{await b.fetchSpaces();const t=b.spaces.map(async c=>{try{return(await S.get(`/spaces/${c.id}/tasks`)).tasks.map(C=>({...C,space_id:c.id,space_name:c.personal_name||c.name,space_color:c.personal_color}))}catch(T){return console.error(`Failed to fetch tasks for space ${c.id}:`,T),[]}}),e=b.spaces.map(async c=>{try{return(await S.get(`/spaces/${c.id}/categories`)).categories.map(C=>({...C,space_id:c.id}))}catch{return[]}}),[o,l]=await Promise.all([Promise.all(t),Promise.all(e)]);x.value=o.flat(),I.value=l.flat()}finally{re.value=!1}}function Q(t){v.value=t,E.value=!0}async function q(t){var e,o;try{const l=x.value.findIndex(C=>C.space_id===t.space_id&&C.id===t.id);l!==-1&&(x.value[l]={...x.value[l],completing:!0}),await new Promise(C=>setTimeout(C,500));const c=await S.post(`/spaces/${t.space_id}/tasks/${t.id}/complete`,{});((e=c.task)==null?void 0:e.status)==="completed"||((o=c.task)==null?void 0:o.task_type)==="inbox"?x.value=x.value.filter(C=>!(C.space_id===t.space_id&&C.id===t.id)):c.task&&l!==-1&&(x.value[l]={...c.task,space_id:t.space_id,space_name:t.space_name,space_color:t.space_color}),g.value=`Erledigt: ${t.title}`,y.value="success",f.value=!0}catch(l){console.error("Failed to complete task:",l),g.value="Fehler beim Erledigen",y.value="error",f.value=!0}}async function el(){await q(v.value),E.value=!1}async function ll(){try{const t=await S.post(`/spaces/${v.value.space_id}/tasks/${v.value.id}/skip`,{}),e=x.value.findIndex(o=>o.space_id===v.value.space_id&&o.id===v.value.id);e!==-1&&(x.value[e]={...t.task,space_id:v.value.space_id,space_name:v.value.space_name,space_color:v.value.space_color}),E.value=!1,g.value="Aufgabe übersprungen",y.value="success",f.value=!0}catch(t){console.error("Failed to skip task:",t),g.value="Fehler beim Überspringen",y.value="error",f.value=!0}}function tl(){W.value="",E.value=!1,J.value=!0}function ze(t){if(!t)return"Kein Datum";const e=new Date(t);return`${["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"][e.getDay()]}, ${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`}async function he(t){await ie({days:t})}async function al(){const t=new Date;t.setDate(t.getDate()+1),await ie({new_date:t.toISOString().split("T")[0]})}async function sl(){const t=new Date;t.setDate(t.getDate()+7),await ie({new_date:t.toISOString().split("T")[0]})}async function nl(){W.value&&await ie({new_date:W.value})}async function ie(t){try{const e=await S.post(`/spaces/${v.value.space_id}/tasks/${v.value.id}/postpone`,t),o=x.value.findIndex(l=>l.space_id===v.value.space_id&&l.id===v.value.id);o!==-1&&(x.value[o]={...e.task,space_id:v.value.space_id,space_name:v.value.space_name,space_color:v.value.space_color}),J.value=!1,g.value=`Verschoben auf ${ze(e.next_due_date)}`,y.value="success",f.value=!0}catch(e){console.error("Failed to postpone task:",e),g.value="Fehler beim Verschieben",y.value="error",f.value=!0}}function il(){E.value=!1,le.value=!0}async function ol(t){try{const e=v.value.space_id,o=t.space_id;o&&o!==e?(await S.post(`/spaces/${o}/tasks`,t),await S.delete(`/spaces/${e}/tasks/${v.value.id}`)):await S.patch(`/spaces/${e}/tasks/${v.value.id}`,t),await H(),g.value="Aufgabe aktualisiert",y.value="success",f.value=!0}catch(e){console.error("Failed to save task:",e),g.value="Fehler beim Speichern",y.value="error",f.value=!0}}async function rl(t){const e=t.space_id||Z.value;if(!e){g.value="Kein Space verfügbar",y.value="error",O.value=2e3,N.value=!1,f.value=!0;return}try{const o=await S.post(`/spaces/${e}/tasks`,t);await H(),Y.value={id:o.task.id,space_id:e},g.value=`Erstellt: ${t.title}`,y.value="success",O.value=4e3,N.value=!0,f.value=!0}catch(o){console.error("Failed to create task:",o),g.value="Fehler beim Erstellen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}function be(t){if(!t.next_due_date)return"";const e=new Date(t.next_due_date);return`${["So","Mo","Di","Mi","Do","Fr","Sa"][e.getDay()]}, ${e.getDate()}.${e.getMonth()+1}.`}function j(t){if(t.task_type==="inbox")return"Inbox";if(t.task_type==="one_time")return t.next_due_date?"Einmalig":"Ohne Datum";if(t.recurrence_type==="interval"){const e=t.interval_days||1;return`Alle ${e} Tag${e>1?"e":""}`}if(t.recurrence_type==="schedule")try{const e=JSON.parse(t.schedule_pattern);if(e.type==="weekly")return"Wöchentlich";if(e.type==="monthly")return"Monatlich"}catch{return"Zeitplan"}return"Wiederholend"}function cl(){E.value=!1,Me.push("/history")}async function ul(){if(confirm(`Möchten Sie die Aufgabe "${v.value.title}" wirklich löschen?`))try{await S.delete(`/spaces/${v.value.space_id}/tasks/${v.value.id}`),x.value=x.value.filter(t=>!(t.space_id===v.value.space_id&&t.id===v.value.id)),E.value=!1,g.value="Aufgabe gelöscht",y.value="success",O.value=2e3,N.value=!1,f.value=!0}catch(t){console.error("Failed to delete task:",t),g.value="Fehler beim Löschen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}async function dl(){if(Y.value)try{await S.delete(`/spaces/${Y.value.space_id}/tasks/${Y.value.id}`),await H(),Y.value=null,f.value=!1}catch(t){console.error("Failed to undo:",t),g.value="Rückgängig fehlgeschlagen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}return(t,e)=>(i(),k(fl,{class:"bg-background"},{default:s(()=>{var o;return[a(gl,{fluid:"",class:"pa-4"},{default:s(()=>[re.value?(i(),k(yl,{key:0},{default:s(()=>[a(xl,{cols:"12",class:"text-center py-8"},{default:s(()=>[a(hl,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):(i(),u(D,{key:1},[p("div",zl,[p("div",Al,[(i(!0),u(D,null,z(F(b).spaces,l=>(i(),k(V,{key:l.id,variant:h.value.includes(l.id)?"flat":"outlined",color:h.value.includes(l.id)?l.personal_color||"primary":"",onClick:c=>Ve(l.id),size:"small"},{default:s(()=>[a(d,{icon:"mdi-folder",size:"small",class:"mr-1"}),n(" "+r(l.personal_name||l.name),1)]),_:2},1032,["variant","color","onClick"]))),128)),a(B),a(bl,{"model-value":Ke.value,dot:"",color:"primary","offset-x":"-2","offset-y":"-2"},{default:s(()=>[a(A,{icon:"mdi-filter-variant",size:"small",variant:"text",onClick:e[0]||(e[0]=l=>te.value=!0)})]),_:1},8,["model-value"])])]),ve.value.length>0?(i(),u("div",El,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[1]||(e[1]=l=>ne.value=!ne.value)},[a(d,{icon:"mdi-inbox",color:"info",class:"mr-2"}),e[18]||(e[18]=p("h2",{class:"text-h6 font-weight-bold text-info"},"Inbox",-1)),a(V,{size:"small",color:"info",class:"ml-2"},{default:s(()=>[n(r(ve.value.length),1)]),_:1}),a(B),a(d,{icon:ne.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(oe,null,{default:s(()=>[we(a(M,{elevation:"0"},{default:s(()=>[a(ee,{class:"pa-0",lines:"two"},{default:s(()=>[(i(!0),u(D,null,z(ve.value,l=>(i(),k(P,{key:`${l.space_id}-${l.id}`,class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(c=>Ze(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-2"},null,8,["onClick"])]),append:s(()=>[a(A,{icon:"mdi-arrow-right-bold",variant:"text",size:"small",color:"primary",onClick:U(c=>He(l),["stop"]),title:"Zur Aufgabe machen"},null,8,["onClick"]),a(A,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:U(c=>Qe(l),["stop"])},null,8,["onClick"])]),default:s(()=>[a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title)+" ",1),a(d,{icon:Je(l.inbox_type),color:We(l.inbox_type),size:"xs",class:"mr-2"},null,8,["icon","color"])]),_:2},1024),l.transcript&&l.transcript!==l.title?(i(),k(G,{key:0,class:"text-caption mt-1"},{default:s(()=>[n(r(l.transcript.substring(0,150))+r(l.transcript.length>150?"...":""),1)]),_:2},1024)):m("",!0)]),_:2},1024))),128))]),_:1})]),_:1},512),[[ke,ne.value]])]),_:1})])):m("",!0),fe.value.length>0?(i(),u("div",Ol,[p("div",Nl,[a(d,{icon:"mdi-alert-circle",color:"error",class:"mr-2"}),e[19]||(e[19]=p("h2",{class:"text-h6 font-weight-bold text-error"},"Überfällig",-1)),a(V,{size:"small",color:"error",class:"ml-2"},{default:s(()=>[n(r(fe.value.length),1)]),_:1})]),a(M,{elevation:"0"},{default:s(()=>[a(ee,{class:"pa-0",lines:"two"},{default:s(()=>[(i(!0),u(D,null,z(fe.value,(l,c)=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:T=>Q(l),class:"px-4 py-3",style:wl({backgroundColor:qe(l.days_overdue),color:Ge(l.days_overdue)})},{prepend:s(()=>[a(R,{"model-value":l.completing||!1,onClick:U(T=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["model-value","onClick"])]),default:s(()=>[p("div",Ml,[F(b).spaces.length>1?(i(),u("span",Ul,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",Ll,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",Bl,r(l.days_overdue)+"d überfällig",1),l.has_specific_time?(i(),u("span",Pl,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+r(l.time_of_day),1)])):m("",!0),p("span",Kl,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+r(j(l)),1)])]),_:2},1024)]),_:2},1032,["onClick","style"]))),128))]),_:1})]),_:1})])):m("",!0),p("div",Rl,[p("div",Jl,[a(d,{icon:"mdi-calendar-today",color:"warning",class:"mr-2"}),e[20]||(e[20]=p("h2",{class:"text-h6 font-weight-bold"},"Heute",-1)),a(V,{size:"small",color:"warning",class:"ml-2"},{default:s(()=>[n(r(_e.value.length),1)]),_:1})]),_e.value.length>0?(i(),k(M,{key:0,elevation:"0"},{default:s(()=>[a(ee,{class:"pa-0",lines:"two"},{default:s(()=>[(i(!0),u(D,null,z(_e.value,(l,c)=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:T=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":l.completing||!1,onClick:U(T=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["model-value","onClick"])]),default:s(()=>[p("div",Wl,[F(b).spaces.length>1?(i(),u("span",Zl,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",Hl,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024),l.has_specific_time||l.task_type==="recurring"?(i(),k(G,{key:0,class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[l.has_specific_time?(i(),u("span",Ql,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+r(l.time_of_day),1)])):m("",!0),l.task_type==="recurring"?(i(),u("span",ql,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+r(j(l)),1)])):m("",!0)]),_:2},1024)):m("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):(i(),k(M,{key:1,elevation:"0"},{default:s(()=>[a(Ce,{class:"text-center py-8"},{default:s(()=>[a(d,{size:"48",color:"grey-lighten-1"},{default:s(()=>[...e[21]||(e[21]=[n("mdi-check-circle-outline",-1)])]),_:1}),e[22]||(e[22]=p("div",{class:"text-body-2 text-medium-emphasis mt-2"}," Keine Aufgaben für heute ",-1))]),_:1})]),_:1}))]),Fe.value.length>0?(i(),u("div",Gl,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[2]||(e[2]=l=>ae.value=!ae.value)},[a(d,{icon:"mdi-calendar-clock",class:"mr-2"}),e[23]||(e[23]=p("h2",{class:"text-h6 font-weight-bold"},"Demnächst",-1)),a(V,{size:"small",variant:"outlined",class:"ml-2"},{default:s(()=>[n(r(Fe.value.length),1)]),_:1}),a(B),a(d,{icon:ae.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(oe,null,{default:s(()=>[we(a(M,{elevation:"0"},{default:s(()=>[a(ee,{class:"pa-0",lines:"two"},{default:s(()=>[ge.value.length>0?(i(),u(D,{key:0},[a($e,{class:"px-4"},{default:s(()=>[e[24]||(e[24]=n(" Morgen ",-1)),a(V,{size:"x-small",class:"ml-2"},{default:s(()=>[n(r(ge.value.length),1)]),_:1})]),_:1}),(i(!0),u(D,null,z(ge.value,l=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:c=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(c=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",Yl,[F(b).spaces.length>1?(i(),u("span",Xl,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",jl,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",et,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+r(be(l)),1)]),l.has_specific_time?(i(),u("span",lt,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+r(l.time_of_day),1)])):m("",!0),p("span",tt,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+r(j(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):m("",!0),ye.value.length>0?(i(),u(D,{key:1},[a($e,{class:"px-4"},{default:s(()=>[e[25]||(e[25]=n(" Nächste 7 Tage ",-1)),a(V,{size:"x-small",class:"ml-2"},{default:s(()=>[n(r(ye.value.length),1)]),_:1})]),_:1}),(i(!0),u(D,null,z(ye.value,l=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:c=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(c=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",at,[F(b).spaces.length>1?(i(),u("span",st,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",nt,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",it,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+r(be(l)),1)]),l.has_specific_time?(i(),u("span",ot,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+r(l.time_of_day),1)])):m("",!0),p("span",rt,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+r(j(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):m("",!0),xe.value.length>0?(i(),u(D,{key:2},[a($e,{class:"px-4"},{default:s(()=>[e[26]||(e[26]=n(" Später ",-1)),a(V,{size:"x-small",class:"ml-2"},{default:s(()=>[n(r(xe.value.length),1)]),_:1})]),_:1}),(i(!0),u(D,null,z(xe.value,l=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:c=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(c=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",ct,[F(b).spaces.length>1?(i(),u("span",ut,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",dt,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",pt,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+r(be(l)),1)]),l.has_specific_time?(i(),u("span",vt,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+r(l.time_of_day),1)])):m("",!0),p("span",mt,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+r(j(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):m("",!0)]),_:1})]),_:1},512),[[ke,ae.value]])]),_:1})])):m("",!0),me.value.length>0?(i(),u("div",ft,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[3]||(e[3]=l=>se.value=!se.value)},[a(d,{icon:"mdi-pause-circle-outline",class:"mr-2"}),e[27]||(e[27]=p("h2",{class:"text-h6 font-weight-bold"},"Inaktiv",-1)),a(V,{size:"small",variant:"outlined",class:"ml-2"},{default:s(()=>[n(r(me.value.length),1)]),_:1}),a(B),a(d,{icon:se.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(oe,null,{default:s(()=>[we(a(M,{elevation:"0"},{default:s(()=>[a(ee,{class:"pa-0",lines:"two"},{default:s(()=>[(i(!0),u(D,null,z(me.value,l=>(i(),k(P,{key:`${l.space_id}-${l.id}`,onClick:c=>Q(l),class:"px-4 py-3"},{default:s(()=>[p("div",_t,[F(b).spaces.length>1?(i(),u("span",gt,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+r(l.space_name),1)])):m("",!0),l.category?(i(),u("span",yt,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+r(l.category.name),1)])):m("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(r(l.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},512),[[ke,se.value]])]),_:1})])):m("",!0),e[28]||(e[28]=p("div",{style:{height:"32px"}},null,-1))],64)),a(A,{icon:"mdi-plus",color:"primary",size:"large",position:"fixed",location:"bottom end",class:"mb-16 me-4",onClick:Ye})]),_:1}),a(Fl,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=l=>E.value=l),task:v.value,"show-space-name":F(b).spaces.length>1,onComplete:el,onSkip:ll,onPostpone:tl,onEdit:il,onHistory:cl,onDelete:ul},null,8,["modelValue","task","show-space-name"]),a(kl,{modelValue:J.value,"onUpdate:modelValue":e[11]||(e[11]=l=>J.value=l)},{default:s(()=>[v.value?(i(),k(M,{key:0},{default:s(()=>[a(Ee,{class:"d-flex align-center"},{default:s(()=>[a(d,{icon:"mdi-calendar-clock",class:"mr-2"}),e[29]||(e[29]=p("span",null,"Verschieben",-1)),a(B),a(A,{icon:"mdi-close",variant:"text",onClick:e[5]||(e[5]=l=>J.value=!1)})]),_:1}),a(Ce,null,{default:s(()=>[p("div",xt," Aktuell fällig: "+r(ze(v.value.next_due_date)),1),p("div",ht,[a(V,{onClick:e[6]||(e[6]=l=>he(1)),variant:"outlined"},{default:s(()=>[...e[30]||(e[30]=[n("+1 Tag",-1)])]),_:1}),a(V,{onClick:e[7]||(e[7]=l=>he(2)),variant:"outlined"},{default:s(()=>[...e[31]||(e[31]=[n("+2 Tage",-1)])]),_:1}),a(V,{onClick:e[8]||(e[8]=l=>he(3)),variant:"outlined"},{default:s(()=>[...e[32]||(e[32]=[n("+3 Tage",-1)])]),_:1}),a(V,{onClick:al,variant:"outlined"},{default:s(()=>[...e[33]||(e[33]=[n("Morgen",-1)])]),_:1}),a(V,{onClick:sl,variant:"outlined"},{default:s(()=>[...e[34]||(e[34]=[n("Nächste Woche",-1)])]),_:1})]),a(Cl,{modelValue:W.value,"onUpdate:modelValue":e[9]||(e[9]=l=>W.value=l),label:"Anderes Datum",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),a(Oe,null,{default:s(()=>[a(A,{variant:"text",onClick:e[10]||(e[10]=l=>J.value=!1)},{default:s(()=>[...e[35]||(e[35]=[n("Abbrechen",-1)])]),_:1}),a(B),a(A,{variant:"text",color:"primary",disabled:!W.value,onClick:nl},{default:s(()=>[...e[36]||(e[36]=[n(" Verschieben ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):m("",!0)]),_:1},8,["modelValue"]),a(Il,{modelValue:ue.value,"onUpdate:modelValue":e[12]||(e[12]=l=>ue.value=l),"default-space-id":Z.value,onAddInbox:Xe,onOpenFull:je},null,8,["modelValue","default-space-id"]),a(Ne,{modelValue:le.value,"onUpdate:modelValue":e[13]||(e[13]=l=>le.value=l),task:v.value,categories:I.value,spaces:F(b).spaces,"default-space-id":(o=v.value)==null?void 0:o.space_id,onSave:ol},null,8,["modelValue","task","categories","spaces","default-space-id"]),a(Ne,{modelValue:ce.value,"onUpdate:modelValue":e[14]||(e[14]=l=>ce.value=l),categories:I.value,spaces:F(b).spaces,"default-space-id":Z.value,"initial-title":Se.value,onSave:rl},null,8,["modelValue","categories","spaces","default-space-id","initial-title"]),a($l,{modelValue:f.value,"onUpdate:modelValue":e[15]||(e[15]=l=>f.value=l),timeout:O.value,color:y.value,location:"top"},Sl({default:s(()=>[n(r(g.value)+" ",1)]),_:2},[N.value?{name:"actions",fn:s(()=>[a(A,{icon:"mdi-undo",variant:"text",onClick:dl})]),key:"0"}:void 0]),1032,["modelValue","timeout","color"]),a(Dl,{modelValue:te.value,"onUpdate:modelValue":e[17]||(e[17]=l=>te.value=l),"max-width":"500"},{default:s(()=>[a(M,null,{default:s(()=>[a(Ee,{class:"d-flex align-center"},{default:s(()=>[a(d,{icon:"mdi-filter-variant",class:"mr-2"}),e[37]||(e[37]=n(" Filter ",-1))]),_:1}),a(Ce,null,{default:s(()=>[(i(!0),u(D,null,z(F(b).spaces,l=>(i(),u("div",{key:l.id,class:"mb-4"},[p("div",bt,[a(Vl,{"model-value":h.value.includes(l.id),"onUpdate:modelValue":c=>Ve(l.id),label:l.personal_name||l.name,color:l.personal_color||"primary","hide-details":"",density:"compact"},null,8,["model-value","onUpdate:modelValue","label","color"])]),a(oe,null,{default:s(()=>[h.value.includes(l.id)?(i(),u("div",wt,[(i(!0),u(D,null,z(Te(l.id),c=>(i(),u("div",{key:c.id,class:"d-flex align-center"},[a(R,{"model-value":w.value.includes(c.id),"onUpdate:modelValue":T=>Pe(c.id),color:c.color,"hide-details":"",density:"compact"},{label:s(()=>[a(d,{icon:c.icon||"mdi-tag",color:c.color,size:"small",class:"mr-2"},null,8,["icon","color"]),n(" "+r(c.name),1)]),_:2},1032,["model-value","onUpdate:modelValue","color"])]))),128)),Te(l.id).length===0?(i(),u("div",kt," Keine Kategorien ")):m("",!0)])):m("",!0)]),_:2},1024)]))),128))]),_:1}),a(Oe,null,{default:s(()=>[a(A,{variant:"text",onClick:Re},{default:s(()=>[...e[38]||(e[38]=[n("Zurücksetzen",-1)])]),_:1}),a(B),a(A,{variant:"text",color:"primary",onClick:e[16]||(e[16]=l=>te.value=!1)},{default:s(()=>[...e[39]||(e[39]=[n("Fertig",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}},Tt=pl(Ct,[["__scopeId","data-v-2fa6e0e0"]]);export{Tt as default};
