import{_ as pl,r as g,v as ae,x as $,y as ml,z as vl,A as D,c as k,w as s,B as fl,a as gl,o,b as a,V as _l,C as u,d as yl,e as xl,D as hl,F as V,E as p,l as v,G as z,H as I,I as T,h as n,J as d,t as c,s as P,p as A,K as re,L as ke,f as M,M as se,N as B,O as K,P as G,k as U,Q as R,R as Se,S as bl,i as Ce,T as $e,U as wl,g as Ee,m as kl,q as Oe,W as Sl,X as Cl,Y as $l,Z as Dl}from"./index-DPaTiaMt.js";import{u as Vl}from"./spaces-Bq9USoTJ.js";import{T as Tl,Q as Il,a as Ne}from"./TaskActionSheet-522X_tmO.js";const Fl={class:"mb-4"},zl={class:"d-flex align-center flex-wrap ga-2"},Al={key:0,class:"mb-6"},El={key:1,class:"mb-6"},Ol={class:"d-flex align-center mb-3"},Nl={class:"d-flex align-center flex-wrap ga-2 mb-1"},Ml={key:0,class:"d-inline-flex align-center text-caption"},Ul={key:1,class:"d-inline-flex align-center text-caption"},Ll={class:"text-error text-caption"},Pl={key:0,class:"d-inline-flex align-center text-caption"},Bl={class:"d-inline-flex align-center text-caption"},Kl={class:"mb-6"},Rl={class:"d-flex align-center mb-3"},Jl={class:"d-flex align-center flex-wrap ga-2 mb-1"},Wl={key:0,class:"d-inline-flex align-center text-caption"},Zl={key:1,class:"d-inline-flex align-center text-caption"},Hl={key:0,class:"d-inline-flex align-center text-caption"},Ql={key:1,class:"d-inline-flex align-center text-caption"},ql={key:2,class:"mb-6"},Gl={class:"d-flex align-center flex-wrap ga-2 mb-1"},Yl={key:0,class:"d-inline-flex align-center text-caption"},Xl={key:1,class:"d-inline-flex align-center text-caption"},jl={class:"d-inline-flex align-center text-caption"},et={key:0,class:"d-inline-flex align-center text-caption"},lt={class:"d-inline-flex align-center text-caption"},tt={class:"d-flex align-center flex-wrap ga-2 mb-1"},at={key:0,class:"d-inline-flex align-center text-caption"},st={key:1,class:"d-inline-flex align-center text-caption"},nt={class:"d-inline-flex align-center text-caption"},ot={key:0,class:"d-inline-flex align-center text-caption"},it={class:"d-inline-flex align-center text-caption"},rt={class:"d-flex align-center flex-wrap ga-2 mb-1"},ct={key:0,class:"d-inline-flex align-center text-caption"},ut={key:1,class:"d-inline-flex align-center text-caption"},dt={class:"d-inline-flex align-center text-caption"},pt={key:0,class:"d-inline-flex align-center text-caption"},mt={class:"d-inline-flex align-center text-caption"},vt={key:3,class:"mb-6"},ft={class:"d-flex align-center flex-wrap ga-2 mb-1"},gt={key:0,class:"d-inline-flex align-center text-caption"},_t={key:1,class:"d-inline-flex align-center text-caption"},yt={class:"text-body-2 text-medium-emphasis mb-3"},xt={class:"d-flex flex-wrap ga-2 mb-4"},ht={class:"d-flex align-center"},bt={key:0,class:"ml-8 mt-2"},wt={key:0,class:"text-caption text-medium-emphasis"},kt={__name:"DashboardView",setup(St){const Me=gl(),b=Vl(),Ue=vl(),ce=g(!1),x=g([]),F=g([]),E=g(!1),ne=g(!1),ue=g(!1),de=g(!1),De=g(""),oe=g(!1),J=g(!1),W=g(""),m=g(null),Ve=g(navigator.onLine),Y=g(localStorage.getItem("dashboard-upcoming-expanded")==="true"),X=g(localStorage.getItem("dashboard-inactive-expanded")==="true"),j=g(localStorage.getItem("dashboard-inbox-expanded")!=="false"),f=g(!1),_=g(""),y=g("success"),O=g(2e3),N=g(!1),ee=g(null);window.addEventListener("online",()=>{Ve.value=!0}),window.addEventListener("offline",()=>{Ve.value=!1});const h=g([]),w=g([]);function Le(){const t=localStorage.getItem("dashboard-space-filter");if(t)try{h.value=JSON.parse(t)}catch{h.value=[]}else h.value=b.spaces.map(e=>e.id)}function pe(){localStorage.setItem("dashboard-space-filter",JSON.stringify(h.value))}function Te(t){const e=h.value.indexOf(t);e===-1?h.value.push(t):h.value.splice(e,1),pe()}ae(h,pe,{deep:!0}),ae(Y,t=>localStorage.setItem("dashboard-upcoming-expanded",t)),ae(X,t=>localStorage.setItem("dashboard-inactive-expanded",t)),ae(j,t=>localStorage.setItem("dashboard-inbox-expanded",t));function Pe(){const t=localStorage.getItem("dashboard-category-filter");if(t)try{w.value=JSON.parse(t)}catch{w.value=[]}else w.value=F.value.map(e=>e.id)}function me(){localStorage.setItem("dashboard-category-filter",JSON.stringify(w.value))}function Be(t){const e=w.value.indexOf(t);e===-1?w.value.push(t):w.value.splice(e,1),me()}ae(w,me,{deep:!0}),$(()=>h.value.length===0?F.value:F.value.filter(t=>h.value.includes(t.space_id)));function Ie(t){return F.value.filter(e=>e.space_id===t)}const Ke=$(()=>{const t=h.value.length===b.spaces.length,e=w.value.length===F.value.length;return!t||!e});function Re(){h.value=b.spaces.map(t=>t.id),w.value=F.value.map(t=>t.id),pe(),me()}const L=$(()=>{let t=x.value.filter(e=>e.status==="active"&&e.task_type!=="inbox");return h.value.length>0&&(t=t.filter(e=>h.value.includes(e.space_id))),w.value.length>0&&(t=t.filter(e=>!e.category_id||w.value.includes(e.category_id))),t}),ve=$(()=>x.value.filter(t=>t.task_type==="inbox"&&t.status==="active"));function Je(t){switch(t){case"voice":return"mdi-microphone";case"manual":return"mdi-keyboard";default:return"mdi-inbox"}}function We(t){switch(t){case"voice":return"info";case"manual":return"grey";default:return"grey"}}async function Ze(t){try{await D.post(`/spaces/${t.space_id}/tasks/${t.id}/complete`,{}),x.value=x.value.filter(e=>!(e.space_id===t.space_id&&e.id===t.id)),_.value=`Erledigt: ${t.title}`,y.value="success",f.value=!0}catch(e){console.error("Failed to complete inbox item:",e),_.value="Fehler beim Erledigen",y.value="error",f.value=!0}}function He(t){m.value=t,ne.value=!0}async function Qe(t){try{await D.delete(`/spaces/${t.space_id}/tasks/${t.id}`),x.value=x.value.filter(e=>!(e.space_id===t.space_id&&e.id===t.id)),_.value="Inbox-Eintrag gelöscht",y.value="success",f.value=!0}catch(e){console.error("Failed to delete inbox item:",e),_.value="Fehler beim Löschen",y.value="error",f.value=!0}}const fe=$(()=>{let t=x.value.filter(e=>e.status==="inactive");return h.value.length>0&&(t=t.filter(e=>h.value.includes(e.space_id))),w.value.length>0&&(t=t.filter(e=>!e.category_id||w.value.includes(e.category_id))),t});function le(t){return t.sort((e,r)=>!e.has_specific_time&&r.has_specific_time?-1:e.has_specific_time&&!r.has_specific_time?1:e.has_specific_time&&r.has_specific_time?e.time_of_day.localeCompare(r.time_of_day):0)}$(()=>{const t=new Date().toISOString().split("T")[0];return L.value.filter(e=>e.has_specific_time&&e.next_due_date===t).sort((e,r)=>e.time_of_day.localeCompare(r.time_of_day))});const ge=$(()=>{const t=L.value.filter(e=>e.is_overdue&&!ze(e));return le(t)}),_e=$(()=>{const t=new Date().toISOString().split("T")[0],e=L.value.filter(r=>r.task_type==="one_time"&&!r.next_due_date&&!r.is_overdue?!0:!r.is_overdue&&r.next_due_date===t&&!ze(r));return le(e)}),ye=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1);const r=e.toISOString().split("T")[0],l=L.value.filter(i=>i.next_due_date===r);return le(l)}),xe=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+1);const r=new Date(t);r.setDate(r.getDate()+7);const l=e.toISOString().split("T")[0],i=r.toISOString().split("T")[0],S=L.value.filter(C=>C.next_due_date>l&&C.next_due_date<=i);return le(S)}),he=$(()=>{const t=new Date,e=new Date(t);e.setDate(e.getDate()+7);const r=e.toISOString().split("T")[0],l=L.value.filter(i=>i.next_due_date>r);return le(l)}),Fe=$(()=>{const t=new Date().toISOString().split("T")[0];return L.value.filter(e=>e.next_due_date>t)});function ze(t){const e=new Date().toISOString().split("T")[0];return t.has_specific_time&&t.next_due_date===e}function qe(t){return t<=1?"#FFCDD2":t<=2?"#EF9A9A":t<=3?"#E57373":t<=5?"#EF5350":"#D32F2F"}function Ge(t){return t<=2?"#000000":"#FFFFFF"}const Z=$(()=>b.spaces.length===0?null:b.spaces[0].id);$(()=>Z.value?F.value.filter(t=>t.space_id===Z.value):[]);function Ye(){de.value=!0}async function Xe(t){const e=t.space_id||Z.value;if(!e){_.value="Kein Space verfügbar",y.value="error",f.value=!0;return}try{const r=await D.post(`/spaces/${e}/tasks`,{title:t.title,task_type:"inbox"});await H(),_.value="Zur Inbox hinzugefügt",y.value="success",O.value=2e3,N.value=!1,f.value=!0}catch(r){console.error("Failed to add to inbox:",r),_.value="Fehler beim Hinzufügen",y.value="error",f.value=!0}}function je(t){De.value=t||"",ue.value=!0}ml(async()=>{await H(),Le(),Pe(),Ue.on("dashboard:refresh",H)});async function H(){ce.value=!0;try{await b.fetchSpaces();const t=b.spaces.map(async i=>{try{return(await D.get(`/spaces/${i.id}/tasks`)).tasks.map(C=>({...C,space_id:i.id,space_name:i.personal_name||i.name,space_color:i.personal_color}))}catch(S){return console.error(`Failed to fetch tasks for space ${i.id}:`,S),[]}}),e=b.spaces.map(async i=>{try{return(await D.get(`/spaces/${i.id}/categories`)).categories.map(C=>({...C,space_id:i.id}))}catch{return[]}}),[r,l]=await Promise.all([Promise.all(t),Promise.all(e)]);x.value=r.flat(),F.value=l.flat()}finally{ce.value=!1}}function Q(t){m.value=t,E.value=!0}async function q(t){var e,r;try{const l=x.value.findIndex(C=>C.space_id===t.space_id&&C.id===t.id);l!==-1&&(x.value[l]={...x.value[l],completing:!0}),await new Promise(C=>setTimeout(C,500));const i=await D.post(`/spaces/${t.space_id}/tasks/${t.id}/complete`,{});((e=i.task)==null?void 0:e.status)==="completed"||((r=i.task)==null?void 0:r.task_type)==="inbox"?x.value=x.value.filter(C=>!(C.space_id===t.space_id&&C.id===t.id)):i.task&&l!==-1&&(x.value[l]={...i.task,space_id:t.space_id,space_name:t.space_name,space_color:t.space_color}),_.value=`Erledigt: ${t.title}`,y.value="success",f.value=!0}catch(l){console.error("Failed to complete task:",l),_.value="Fehler beim Erledigen",y.value="error",f.value=!0}}async function el(){await q(m.value),E.value=!1}async function ll(){try{const t=await D.post(`/spaces/${m.value.space_id}/tasks/${m.value.id}/skip`,{}),e=x.value.findIndex(r=>r.space_id===m.value.space_id&&r.id===m.value.id);e!==-1&&(x.value[e]={...t.task,space_id:m.value.space_id,space_name:m.value.space_name,space_color:m.value.space_color}),E.value=!1,_.value="Aufgabe übersprungen",y.value="success",f.value=!0}catch(t){console.error("Failed to skip task:",t),_.value="Fehler beim Überspringen",y.value="error",f.value=!0}}function tl(){W.value="",E.value=!1,J.value=!0}function Ae(t){if(!t)return"Kein Datum";const[e,r,l]=t.split("-").map(Number),i=new Date(e,r-1,l);return`${["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"][i.getDay()]}, ${i.getDate()}.${i.getMonth()+1}.${i.getFullYear()}`}async function be(t){await ie({days:t})}async function al(){const t=new Date;t.setDate(t.getDate()+1),await ie({new_date:t.toISOString().split("T")[0]})}async function sl(){const t=new Date;t.setDate(t.getDate()+7),await ie({new_date:t.toISOString().split("T")[0]})}async function nl(){W.value&&await ie({new_date:W.value})}async function ie(t){try{const e=await D.post(`/spaces/${m.value.space_id}/tasks/${m.value.id}/postpone`,t),r=x.value.findIndex(l=>l.space_id===m.value.space_id&&l.id===m.value.id);r!==-1&&(x.value[r]={...e.task,space_id:m.value.space_id,space_name:m.value.space_name,space_color:m.value.space_color}),J.value=!1,_.value=`Verschoben auf ${Ae(e.next_due_date)}`,y.value="success",f.value=!0}catch(e){console.error("Failed to postpone task:",e),_.value="Fehler beim Verschieben",y.value="error",f.value=!0}}function ol(){E.value=!1,ne.value=!0}async function il(t){try{const e=m.value.space_id,r=t.space_id;r&&r!==e?(await D.post(`/spaces/${r}/tasks`,t),await D.delete(`/spaces/${e}/tasks/${m.value.id}`)):await D.patch(`/spaces/${e}/tasks/${m.value.id}`,t),await H(),_.value="Aufgabe aktualisiert",y.value="success",f.value=!0}catch(e){console.error("Failed to save task:",e),_.value="Fehler beim Speichern",y.value="error",f.value=!0}}async function rl(t){const e=t.space_id||Z.value;if(!e){_.value="Kein Space verfügbar",y.value="error",O.value=2e3,N.value=!1,f.value=!0;return}try{const r=await D.post(`/spaces/${e}/tasks`,t);await H(),ee.value={id:r.task.id,space_id:e},_.value=`Erstellt: ${t.title}`,y.value="success",O.value=4e3,N.value=!0,f.value=!0}catch(r){console.error("Failed to create task:",r),_.value="Fehler beim Erstellen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}function we(t){if(!t.next_due_date)return"";const[e,r,l]=t.next_due_date.split("-").map(Number),i=new Date(e,r-1,l);return`${["So","Mo","Di","Mi","Do","Fr","Sa"][i.getDay()]}, ${i.getDate()}.${i.getMonth()+1}.`}function te(t){if(t.task_type==="inbox")return"Inbox";if(t.task_type==="one_time")return t.next_due_date?"Einmalig":"Ohne Datum";if(t.recurrence_type==="interval"){const e=t.interval_days||1;return`Alle ${e} Tag${e>1?"e":""}`}if(t.recurrence_type==="schedule")try{const e=JSON.parse(t.schedule_pattern);if(e.type==="weekly")return"Wöchentlich";if(e.type==="monthly")return"Monatlich"}catch{return"Zeitplan"}return"Wiederholend"}function cl(){E.value=!1,Me.push("/history")}async function ul(){if(confirm(`Möchten Sie die Aufgabe "${m.value.title}" wirklich löschen?`))try{await D.delete(`/spaces/${m.value.space_id}/tasks/${m.value.id}`),x.value=x.value.filter(t=>!(t.space_id===m.value.space_id&&t.id===m.value.id)),E.value=!1,_.value="Aufgabe gelöscht",y.value="success",O.value=2e3,N.value=!1,f.value=!0}catch(t){console.error("Failed to delete task:",t),_.value="Fehler beim Löschen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}async function dl(){if(ee.value)try{await D.delete(`/spaces/${ee.value.space_id}/tasks/${ee.value.id}`),await H(),ee.value=null,f.value=!1}catch(t){console.error("Failed to undo:",t),_.value="Rückgängig fehlgeschlagen",y.value="error",O.value=2e3,N.value=!1,f.value=!0}}return(t,e)=>(o(),k(fl,{class:"bg-background"},{default:s(()=>{var r;return[a(_l,{fluid:"",class:"pa-4"},{default:s(()=>[ce.value?(o(),k(yl,{key:0},{default:s(()=>[a(xl,{cols:"12",class:"text-center py-8"},{default:s(()=>[a(hl,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):(o(),u(V,{key:1},[p("div",Fl,[p("div",zl,[(o(!0),u(V,null,z(I(b).spaces,l=>(o(),k(T,{key:l.id,variant:h.value.includes(l.id)?"flat":"outlined",color:h.value.includes(l.id)?l.personal_color||"primary":"",onClick:i=>Te(l.id),size:"small"},{default:s(()=>[a(d,{icon:"mdi-folder",size:"small",class:"mr-1"}),n(" "+c(l.personal_name||l.name),1)]),_:2},1032,["variant","color","onClick"]))),128)),a(P),a(A,{icon:"mdi-filter-variant",size:"small",variant:"text",color:Ke.value?"error":void 0,onClick:e[0]||(e[0]=l=>oe.value=!0)},null,8,["color"])])]),ve.value.length>0?(o(),u("div",Al,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[1]||(e[1]=l=>j.value=!j.value)},[a(d,{icon:"mdi-inbox",color:"info",class:"mr-2"}),e[18]||(e[18]=p("h2",{class:"text-h6 font-weight-bold text-info"},"Inbox",-1)),a(T,{size:"small",color:"info",class:"ml-2"},{default:s(()=>[n(c(ve.value.length),1)]),_:1}),a(P),a(d,{icon:j.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(re,null,{default:s(()=>[ke(a(M,{elevation:"0"},{default:s(()=>[a(se,{class:"pa-0",lines:"two"},{default:s(()=>[(o(!0),u(V,null,z(ve.value,l=>(o(),k(B,{key:`${l.space_id}-${l.id}`,class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(i=>Ze(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-2"},null,8,["onClick"])]),append:s(()=>[a(A,{icon:"mdi-arrow-right-bold",variant:"text",size:"small",color:"primary",onClick:U(i=>He(l),["stop"]),title:"Zur Aufgabe machen"},null,8,["onClick"]),a(A,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:U(i=>Qe(l),["stop"])},null,8,["onClick"])]),default:s(()=>[a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title)+" ",1),a(d,{icon:Je(l.inbox_type),color:We(l.inbox_type),size:"xs",class:"mr-2"},null,8,["icon","color"])]),_:2},1024),l.transcript&&l.transcript!==l.title?(o(),k(G,{key:0,class:"text-caption mt-1"},{default:s(()=>[n(c(l.transcript.substring(0,150))+c(l.transcript.length>150?"...":""),1)]),_:2},1024)):v("",!0)]),_:2},1024))),128))]),_:1})]),_:1},512),[[Se,j.value]])]),_:1})])):v("",!0),ge.value.length>0?(o(),u("div",El,[p("div",Ol,[a(d,{icon:"mdi-alert-circle",color:"error",class:"mr-2"}),e[19]||(e[19]=p("h2",{class:"text-h6 font-weight-bold text-error"},"Überfällig",-1)),a(T,{size:"small",color:"error",class:"ml-2"},{default:s(()=>[n(c(ge.value.length),1)]),_:1})]),a(M,{elevation:"0"},{default:s(()=>[a(se,{class:"pa-0",lines:"two"},{default:s(()=>[(o(!0),u(V,null,z(ge.value,(l,i)=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:S=>Q(l),class:"px-4 py-3",style:bl({backgroundColor:qe(l.days_overdue),color:Ge(l.days_overdue)})},{prepend:s(()=>[a(R,{"model-value":l.completing||!1,onClick:U(S=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["model-value","onClick"])]),default:s(()=>[p("div",Nl,[I(b).spaces.length>1?(o(),u("span",Ml,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",Ul,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",Ll,c(l.days_overdue)+"d überfällig",1),l.has_specific_time?(o(),u("span",Pl,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+c(l.time_of_day),1)])):v("",!0),p("span",Bl,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+c(te(l)),1)])]),_:2},1024)]),_:2},1032,["onClick","style"]))),128))]),_:1})]),_:1})])):v("",!0),p("div",Kl,[p("div",Rl,[a(d,{icon:"mdi-calendar-today",color:"warning",class:"mr-2"}),e[20]||(e[20]=p("h2",{class:"text-h6 font-weight-bold"},"Heute",-1)),a(T,{size:"small",color:"warning",class:"ml-2"},{default:s(()=>[n(c(_e.value.length),1)]),_:1})]),_e.value.length>0?(o(),k(M,{key:0,elevation:"0"},{default:s(()=>[a(se,{class:"pa-0",lines:"two"},{default:s(()=>[(o(!0),u(V,null,z(_e.value,(l,i)=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:S=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":l.completing||!1,onClick:U(S=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["model-value","onClick"])]),default:s(()=>[p("div",Jl,[I(b).spaces.length>1?(o(),u("span",Wl,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",Zl,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024),l.has_specific_time||l.task_type==="recurring"?(o(),k(G,{key:0,class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[l.has_specific_time?(o(),u("span",Hl,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+c(l.time_of_day),1)])):v("",!0),l.task_type==="recurring"?(o(),u("span",Ql,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+c(te(l)),1)])):v("",!0)]),_:2},1024)):v("",!0)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):(o(),k(M,{key:1,elevation:"0"},{default:s(()=>[a(Ce,{class:"text-center py-8"},{default:s(()=>[a(d,{size:"48",color:"grey-lighten-1"},{default:s(()=>[...e[21]||(e[21]=[n("mdi-check-circle-outline",-1)])]),_:1}),e[22]||(e[22]=p("div",{class:"text-body-2 text-medium-emphasis mt-2"}," Keine Aufgaben für heute ",-1))]),_:1})]),_:1}))]),Fe.value.length>0?(o(),u("div",ql,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[2]||(e[2]=l=>Y.value=!Y.value)},[a(d,{icon:"mdi-calendar-clock",class:"mr-2"}),e[23]||(e[23]=p("h2",{class:"text-h6 font-weight-bold"},"Demnächst",-1)),a(T,{size:"small",variant:"outlined",class:"ml-2"},{default:s(()=>[n(c(Fe.value.length),1)]),_:1}),a(P),a(d,{icon:Y.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(re,null,{default:s(()=>[ke(a(M,{elevation:"0"},{default:s(()=>[a(se,{class:"pa-0",lines:"two"},{default:s(()=>[ye.value.length>0?(o(),u(V,{key:0},[a($e,{class:"px-4"},{default:s(()=>[e[24]||(e[24]=n(" Morgen ",-1)),a(T,{size:"x-small",class:"ml-2"},{default:s(()=>[n(c(ye.value.length),1)]),_:1})]),_:1}),(o(!0),u(V,null,z(ye.value,l=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:i=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(i=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",Gl,[I(b).spaces.length>1?(o(),u("span",Yl,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",Xl,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",jl,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+c(we(l)),1)]),l.has_specific_time?(o(),u("span",et,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+c(l.time_of_day),1)])):v("",!0),p("span",lt,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+c(te(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):v("",!0),xe.value.length>0?(o(),u(V,{key:1},[a($e,{class:"px-4"},{default:s(()=>[e[25]||(e[25]=n(" Nächste 7 Tage ",-1)),a(T,{size:"x-small",class:"ml-2"},{default:s(()=>[n(c(xe.value.length),1)]),_:1})]),_:1}),(o(!0),u(V,null,z(xe.value,l=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:i=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(i=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",tt,[I(b).spaces.length>1?(o(),u("span",at,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",st,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",nt,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+c(we(l)),1)]),l.has_specific_time?(o(),u("span",ot,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+c(l.time_of_day),1)])):v("",!0),p("span",it,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+c(te(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):v("",!0),he.value.length>0?(o(),u(V,{key:2},[a($e,{class:"px-4"},{default:s(()=>[e[26]||(e[26]=n(" Später ",-1)),a(T,{size:"x-small",class:"ml-2"},{default:s(()=>[n(c(he.value.length),1)]),_:1})]),_:1}),(o(!0),u(V,null,z(he.value,l=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:i=>Q(l),class:"px-4 py-3"},{prepend:s(()=>[a(R,{"model-value":!1,onClick:U(i=>q(l),["stop"]),"hide-details":"",color:"success",density:"compact",class:"mr-4"},null,8,["onClick"])]),default:s(()=>[p("div",rt,[I(b).spaces.length>1?(o(),u("span",ct,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",ut,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024),a(G,{class:"d-flex align-center flex-wrap ga-2 mt-1"},{default:s(()=>[p("span",dt,[a(d,{icon:"mdi-calendar",size:"small",class:"mr-1"}),n(" "+c(we(l)),1)]),l.has_specific_time?(o(),u("span",pt,[a(d,{icon:"mdi-clock-outline",size:"small",class:"mr-1"}),n(" "+c(l.time_of_day),1)])):v("",!0),p("span",mt,[a(d,{icon:"mdi-refresh",size:"small",class:"mr-1"}),n(" "+c(te(l)),1)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):v("",!0)]),_:1})]),_:1},512),[[Se,Y.value]])]),_:1})])):v("",!0),fe.value.length>0?(o(),u("div",vt,[p("div",{class:"d-flex align-center mb-3 cursor-pointer",onClick:e[3]||(e[3]=l=>X.value=!X.value)},[a(d,{icon:"mdi-pause-circle-outline",class:"mr-2"}),e[27]||(e[27]=p("h2",{class:"text-h6 font-weight-bold"},"Inaktiv",-1)),a(T,{size:"small",variant:"outlined",class:"ml-2"},{default:s(()=>[n(c(fe.value.length),1)]),_:1}),a(P),a(d,{icon:X.value?"mdi-chevron-up":"mdi-chevron-down"},null,8,["icon"])]),a(re,null,{default:s(()=>[ke(a(M,{elevation:"0"},{default:s(()=>[a(se,{class:"pa-0",lines:"two"},{default:s(()=>[(o(!0),u(V,null,z(fe.value,l=>(o(),k(B,{key:`${l.space_id}-${l.id}`,onClick:i=>Q(l),class:"px-4 py-3"},{default:s(()=>[p("div",ft,[I(b).spaces.length>1?(o(),u("span",gt,[a(d,{icon:"mdi-folder",size:"small",class:"mr-1",color:l.space_color||"grey"},null,8,["color"]),n(" "+c(l.space_name),1)])):v("",!0),l.category?(o(),u("span",_t,[a(d,{icon:l.category.icon||"mdi-tag",color:l.category.color,size:"small",class:"mr-1"},null,8,["icon","color"]),n(" "+c(l.category.name),1)])):v("",!0)]),a(K,{class:"text-body-1 font-weight-medium"},{default:s(()=>[n(c(l.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},512),[[Se,X.value]])]),_:1})])):v("",!0),e[28]||(e[28]=p("div",{style:{height:"32px"}},null,-1))],64)),a(A,{icon:"mdi-plus",color:"primary",size:"large",position:"fixed",location:"bottom end",class:"mb-16 me-4",onClick:Ye})]),_:1}),a(Tl,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=l=>E.value=l),task:m.value,"show-space-name":I(b).spaces.length>1,onComplete:el,onSkip:ll,onPostpone:tl,onEdit:ol,onHistory:cl,onDelete:ul},null,8,["modelValue","task","show-space-name"]),a(wl,{modelValue:J.value,"onUpdate:modelValue":e[11]||(e[11]=l=>J.value=l)},{default:s(()=>[m.value?(o(),k(M,{key:0},{default:s(()=>[a(Ee,{class:"d-flex align-center"},{default:s(()=>[a(d,{icon:"mdi-calendar-clock",class:"mr-2"}),e[29]||(e[29]=p("span",null,"Verschieben",-1)),a(P),a(A,{icon:"mdi-close",variant:"text",onClick:e[5]||(e[5]=l=>J.value=!1)})]),_:1}),a(Ce,null,{default:s(()=>[p("div",yt," Aktuell fällig: "+c(Ae(m.value.next_due_date)),1),p("div",xt,[a(T,{onClick:e[6]||(e[6]=l=>be(1)),variant:"outlined"},{default:s(()=>[...e[30]||(e[30]=[n("+1 Tag",-1)])]),_:1}),a(T,{onClick:e[7]||(e[7]=l=>be(2)),variant:"outlined"},{default:s(()=>[...e[31]||(e[31]=[n("+2 Tage",-1)])]),_:1}),a(T,{onClick:e[8]||(e[8]=l=>be(3)),variant:"outlined"},{default:s(()=>[...e[32]||(e[32]=[n("+3 Tage",-1)])]),_:1}),a(T,{onClick:al,variant:"outlined"},{default:s(()=>[...e[33]||(e[33]=[n("Morgen",-1)])]),_:1}),a(T,{onClick:sl,variant:"outlined"},{default:s(()=>[...e[34]||(e[34]=[n("Nächste Woche",-1)])]),_:1})]),a(kl,{modelValue:W.value,"onUpdate:modelValue":e[9]||(e[9]=l=>W.value=l),label:"Anderes Datum",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),a(Oe,null,{default:s(()=>[a(A,{variant:"text",onClick:e[10]||(e[10]=l=>J.value=!1)},{default:s(()=>[...e[35]||(e[35]=[n("Abbrechen",-1)])]),_:1}),a(P),a(A,{variant:"text",color:"primary",disabled:!W.value,onClick:nl},{default:s(()=>[...e[36]||(e[36]=[n(" Verschieben ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):v("",!0)]),_:1},8,["modelValue"]),a(Il,{modelValue:de.value,"onUpdate:modelValue":e[12]||(e[12]=l=>de.value=l),"default-space-id":Z.value,onAddInbox:Xe,onOpenFull:je},null,8,["modelValue","default-space-id"]),a(Ne,{modelValue:ne.value,"onUpdate:modelValue":e[13]||(e[13]=l=>ne.value=l),task:m.value,categories:F.value,spaces:I(b).spaces,"default-space-id":(r=m.value)==null?void 0:r.space_id,onSave:il},null,8,["modelValue","task","categories","spaces","default-space-id"]),a(Ne,{modelValue:ue.value,"onUpdate:modelValue":e[14]||(e[14]=l=>ue.value=l),categories:F.value,spaces:I(b).spaces,"default-space-id":Z.value,"initial-title":De.value,onSave:rl},null,8,["modelValue","categories","spaces","default-space-id","initial-title"]),a(Sl,{modelValue:f.value,"onUpdate:modelValue":e[15]||(e[15]=l=>f.value=l),timeout:O.value,color:y.value,location:"top"},Cl({default:s(()=>[n(c(_.value)+" ",1)]),_:2},[N.value?{name:"actions",fn:s(()=>[a(A,{icon:"mdi-undo",variant:"text",onClick:dl})]),key:"0"}:void 0]),1032,["modelValue","timeout","color"]),a($l,{modelValue:oe.value,"onUpdate:modelValue":e[17]||(e[17]=l=>oe.value=l),"max-width":"500"},{default:s(()=>[a(M,null,{default:s(()=>[a(Ee,{class:"d-flex align-center"},{default:s(()=>[a(d,{icon:"mdi-filter-variant",class:"mr-2"}),e[37]||(e[37]=n(" Filter ",-1))]),_:1}),a(Ce,null,{default:s(()=>[(o(!0),u(V,null,z(I(b).spaces,l=>(o(),u("div",{key:l.id,class:"mb-4"},[p("div",ht,[a(Dl,{"model-value":h.value.includes(l.id),"onUpdate:modelValue":i=>Te(l.id),label:l.personal_name||l.name,color:l.personal_color||"primary","hide-details":"",density:"compact"},null,8,["model-value","onUpdate:modelValue","label","color"])]),a(re,null,{default:s(()=>[h.value.includes(l.id)?(o(),u("div",bt,[(o(!0),u(V,null,z(Ie(l.id),i=>(o(),u("div",{key:i.id,class:"d-flex align-center"},[a(R,{"model-value":w.value.includes(i.id),"onUpdate:modelValue":S=>Be(i.id),color:i.color,"hide-details":"",density:"compact"},{label:s(()=>[a(d,{icon:i.icon||"mdi-tag",color:i.color,size:"small",class:"mr-2"},null,8,["icon","color"]),n(" "+c(i.name),1)]),_:2},1032,["model-value","onUpdate:modelValue","color"])]))),128)),Ie(l.id).length===0?(o(),u("div",wt," Keine Kategorien ")):v("",!0)])):v("",!0)]),_:2},1024)]))),128))]),_:1}),a(Oe,null,{default:s(()=>[a(A,{variant:"text",onClick:Re},{default:s(()=>[...e[38]||(e[38]=[n("Zurücksetzen",-1)])]),_:1}),a(P),a(A,{variant:"text",color:"primary",onClick:e[16]||(e[16]=l=>oe.value=!1)},{default:s(()=>[...e[39]||(e[39]=[n("Fertig",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}},Vt=pl(kt,[["__scopeId","data-v-e44d5a0d"]]);export{Vt as default};
