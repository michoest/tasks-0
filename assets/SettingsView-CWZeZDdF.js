import{_ as We,u as Be,r as L,x as $e,aj as Ke,y as Ie,A as R,c as Z,w as n,B as Ye,a as Ee,o as Y,b as t,V as Ue,E as A,f as X,l as ee,g as re,s as ce,p as V,M as we,C as Ae,F as He,G as je,H as fe,N as ve,O as me,h as m,t as J,I as Je,J as se,k as Pe,i as ie,P as ye,af as Re,q as be,m as pe,ak as Ze,al as _e,am as Me,an as qe,ao as De,ag as Ge,n as Qe,X as Xe,Z as Ce,U as Te,W as Fe}from"./index-Be5QwTwi.js";import{u as et}from"./spaces-Bam0NYmJ.js";var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var Le={exports:{}};(function(E,ge){(function(M,$){E.exports=$()})(Ve,function(){var M=1e3,$=6e4,F=36e5,g="millisecond",d="second",h="minute",w="hour",b="day",D="week",S="month",U="quarter",z="year",N="date",C="Invalid Date",H=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,le={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(c){var s=["th","st","nd","rd"],r=c%100;return"["+c+(s[(r-20)%10]||s[r]||s[0])+"]"}},ue=function(c,s,r){var l=String(c);return!l||l.length>=s?c:""+Array(s+1-l.length).join(r)+c},te={s:ue,z:function(c){var s=-c.utcOffset(),r=Math.abs(s),l=Math.floor(r/60),i=r%60;return(s<=0?"+":"-")+ue(l,2,"0")+":"+ue(i,2,"0")},m:function c(s,r){if(s.date()<r.date())return-c(r,s);var l=12*(r.year()-s.year())+(r.month()-s.month()),i=s.clone().add(l,S),v=r-i<0,p=s.clone().add(l+(v?-1:1),S);return+(-(l+(r-i)/(v?i-p:p-i))||0)},a:function(c){return c<0?Math.ceil(c)||0:Math.floor(c)},p:function(c){return{M:S,y:z,w:D,d:b,D:N,h:w,m:h,s:d,ms:g,Q:U}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(c){return c===void 0}},O="en",x={};x[O]=le;var q="$isDayjsObject",j=function(c){return c instanceof de||!(!c||!c[q])},f=function c(s,r,l){var i;if(!s)return O;if(typeof s=="string"){var v=s.toLowerCase();x[v]&&(i=v),r&&(x[v]=r,i=v);var p=s.split("-");if(!i&&p.length>1)return c(p[0])}else{var k=s.name;x[k]=s,i=k}return!l&&i&&(O=i),i||!l&&O},u=function(c,s){if(j(c))return c.clone();var r=typeof s=="object"?s:{};return r.date=c,r.args=arguments,new de(r)},y=te;y.l=f,y.i=j,y.w=function(c,s){return u(c,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var de=function(){function c(r){this.$L=f(r.locale,null,!0),this.parse(r),this.$x=this.$x||r.x||{},this[q]=!0}var s=c.prototype;return s.parse=function(r){this.$d=function(l){var i=l.date,v=l.utc;if(i===null)return new Date(NaN);if(y.u(i))return new Date;if(i instanceof Date)return new Date(i);if(typeof i=="string"&&!/Z$/i.test(i)){var p=i.match(H);if(p){var k=p[2]-1||0,_=(p[7]||"0").substring(0,3);return v?new Date(Date.UTC(p[1],k,p[3]||1,p[4]||0,p[5]||0,p[6]||0,_)):new Date(p[1],k,p[3]||1,p[4]||0,p[5]||0,p[6]||0,_)}}return new Date(i)}(r),this.init()},s.init=function(){var r=this.$d;this.$y=r.getFullYear(),this.$M=r.getMonth(),this.$D=r.getDate(),this.$W=r.getDay(),this.$H=r.getHours(),this.$m=r.getMinutes(),this.$s=r.getSeconds(),this.$ms=r.getMilliseconds()},s.$utils=function(){return y},s.isValid=function(){return this.$d.toString()!==C},s.isSame=function(r,l){var i=u(r);return this.startOf(l)<=i&&i<=this.endOf(l)},s.isAfter=function(r,l){return u(r)<this.startOf(l)},s.isBefore=function(r,l){return this.endOf(l)<u(r)},s.$g=function(r,l,i){return y.u(r)?this[l]:this.set(i,r)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(r,l){var i=this,v=!!y.u(l)||l,p=y.p(r),k=function(G,W){var Q=y.w(i.$u?Date.UTC(i.$y,W,G):new Date(i.$y,W,G),i);return v?Q:Q.endOf(b)},_=function(G,W){return y.w(i.toDate()[G].apply(i.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(W)),i)},P=this.$W,T=this.$M,B=this.$D,ne="set"+(this.$u?"UTC":"");switch(p){case z:return v?k(1,0):k(31,11);case S:return v?k(1,T):k(0,T+1);case D:var ae=this.$locale().weekStart||0,oe=(P<ae?P+7:P)-ae;return k(v?B-oe:B+(6-oe),T);case b:case N:return _(ne+"Hours",0);case w:return _(ne+"Minutes",1);case h:return _(ne+"Seconds",2);case d:return _(ne+"Milliseconds",3);default:return this.clone()}},s.endOf=function(r){return this.startOf(r,!1)},s.$set=function(r,l){var i,v=y.p(r),p="set"+(this.$u?"UTC":""),k=(i={},i[b]=p+"Date",i[N]=p+"Date",i[S]=p+"Month",i[z]=p+"FullYear",i[w]=p+"Hours",i[h]=p+"Minutes",i[d]=p+"Seconds",i[g]=p+"Milliseconds",i)[v],_=v===b?this.$D+(l-this.$W):l;if(v===S||v===z){var P=this.clone().set(N,1);P.$d[k](_),P.init(),this.$d=P.set(N,Math.min(this.$D,P.daysInMonth())).$d}else k&&this.$d[k](_);return this.init(),this},s.set=function(r,l){return this.clone().$set(r,l)},s.get=function(r){return this[y.p(r)]()},s.add=function(r,l){var i,v=this;r=Number(r);var p=y.p(l),k=function(T){var B=u(v);return y.w(B.date(B.date()+Math.round(T*r)),v)};if(p===S)return this.set(S,this.$M+r);if(p===z)return this.set(z,this.$y+r);if(p===b)return k(1);if(p===D)return k(7);var _=(i={},i[h]=$,i[w]=F,i[d]=M,i)[p]||1,P=this.$d.getTime()+r*_;return y.w(P,this)},s.subtract=function(r,l){return this.add(-1*r,l)},s.format=function(r){var l=this,i=this.$locale();if(!this.isValid())return i.invalidDate||C;var v=r||"YYYY-MM-DDTHH:mm:ssZ",p=y.z(this),k=this.$H,_=this.$m,P=this.$M,T=i.weekdays,B=i.months,ne=i.meridiem,ae=function(W,Q,a,e){return W&&(W[Q]||W(l,v))||a[Q].slice(0,e)},oe=function(W){return y.s(k%12||12,W,"0")},G=ne||function(W,Q,a){var e=W<12?"AM":"PM";return a?e.toLowerCase():e};return v.replace(I,function(W,Q){return Q||function(a){switch(a){case"YY":return String(l.$y).slice(-2);case"YYYY":return y.s(l.$y,4,"0");case"M":return P+1;case"MM":return y.s(P+1,2,"0");case"MMM":return ae(i.monthsShort,P,B,3);case"MMMM":return ae(B,P);case"D":return l.$D;case"DD":return y.s(l.$D,2,"0");case"d":return String(l.$W);case"dd":return ae(i.weekdaysMin,l.$W,T,2);case"ddd":return ae(i.weekdaysShort,l.$W,T,3);case"dddd":return T[l.$W];case"H":return String(k);case"HH":return y.s(k,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return G(k,_,!0);case"A":return G(k,_,!1);case"m":return String(_);case"mm":return y.s(_,2,"0");case"s":return String(l.$s);case"ss":return y.s(l.$s,2,"0");case"SSS":return y.s(l.$ms,3,"0");case"Z":return p}return null}(W)||p.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(r,l,i){var v,p=this,k=y.p(l),_=u(r),P=(_.utcOffset()-this.utcOffset())*$,T=this-_,B=function(){return y.m(p,_)};switch(k){case z:v=B()/12;break;case S:v=B();break;case U:v=B()/3;break;case D:v=(T-P)/6048e5;break;case b:v=(T-P)/864e5;break;case w:v=T/F;break;case h:v=T/$;break;case d:v=T/M;break;default:v=T}return i?v:y.a(v)},s.daysInMonth=function(){return this.endOf(S).$D},s.$locale=function(){return x[this.$L]},s.locale=function(r,l){if(!r)return this.$L;var i=this.clone(),v=f(r,l,!0);return v&&(i.$L=v),i},s.clone=function(){return y.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},c}(),Se=de.prototype;return u.prototype=Se,[["$ms",g],["$s",d],["$m",h],["$H",w],["$W",b],["$M",S],["$y",z],["$D",N]].forEach(function(c){Se[c[1]]=function(s){return this.$g(s,c[0],c[1])}}),u.extend=function(c,s){return c.$i||(c(s,de,u),c.$i=!0),u},u.locale=f,u.isDayjs=j,u.unix=function(c){return u(1e3*c)},u.en=x[O],u.Ls=x,u.p={},u})})(Le);var Ne=Le.exports;const xe=ze(Ne);var Oe={exports:{}};(function(E,ge){(function(M,$){E.exports=$()})(Ve,function(){return function(M,$,F){M=M||{};var g=$.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(b,D,S,U){return g.fromToBase(b,D,S,U)}F.en.relativeTime=d,g.fromToBase=function(b,D,S,U,z){for(var N,C,H,I=S.$locale().relativeTime||d,le=M.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ue=le.length,te=0;te<ue;te+=1){var O=le[te];O.d&&(N=U?F(b).diff(S,O.d,!0):S.diff(b,O.d,!0));var x=(M.rounding||Math.round)(Math.abs(N));if(H=N>0,x<=O.r||!O.r){x<=1&&te>0&&(O=le[te-1]);var q=I[O.l];z&&(x=z(""+x)),C=typeof q=="string"?q.replace("%d",x):q(x,D,O.l,H);break}}if(D)return C;var j=H?I.future:I.past;return typeof j=="function"?j(C):j.replace("%s",C)},g.to=function(b,D){return h(b,D,this,!0)},g.from=function(b,D){return h(b,D,this)};var w=function(b){return b.$u?F.utc():F()};g.toNow=function(b){return this.to(w(this),b)},g.fromNow=function(b){return this.from(w(this),b)}}})})(Oe);var tt=Oe.exports;const nt=ze(tt);var at={exports:{}};(function(E,ge){(function(M,$){E.exports=$(Ne)})(Ve,function(M){function $(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}var F=$(M),g={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function d(w,b,D){var S=g[D];return Array.isArray(S)&&(S=S[b?0:1]),S.replace("%d",w)}var h={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(w){return w+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:d,m:d,mm:d,h:d,hh:d,d,dd:d,M:d,MM:d,y:d,yy:d}};return F.default.locale(h,null,!0),h})})(at);const rt={class:"d-flex flex-column mr-1"},it={class:"d-flex align-center"},st={class:"d-flex ga-2 flex-wrap"},lt={class:"text-caption",style:{"white-space":"pre-wrap","word-break":"break-all","max-height":"200px","overflow-y":"auto"}},ut={key:0,class:"d-flex align-center ga-2 mb-3"},ot={class:"d-flex ga-2 flex-wrap"},dt={class:"text-body-2"},ct={class:"mb-2"},ft={class:"mt-1"},vt={__name:"SettingsView",setup(E){xe.extend(nt),xe.locale("de");const ge=Ee(),M=Be(),$=et(),F=L({notification_time:"09:00",digest_filter:"overdue_and_today"}),g=L(!1),d=L(""),h=L("success"),w=L(!1),b=L(!1),D=L({first_name:"",last_name:""}),S=L(!1),U=L(!1),z=L(""),N=L(""),C=L(null),H=L(!1),I=L(!1),le=$e(()=>window.location.origin),ue="11.02.2026, 14:01",te=1770814906855,O=$e(()=>xe(te).fromNow()),x=L(!1),q=L(!1),j=L(""),f=Ke({serviceWorker:!1,serviceWorkerDetails:"Prüfung...",notificationPermission:"default",pushSubscription:!1,pushSubscriptionDetails:"Prüfung...",vapidKey:!1,vapidKeyDetails:"Prüfung..."});function u(a){const e=new Date().toLocaleTimeString();j.value=`[${e}] ${a}
${j.value}`}async function y(){var a;x.value=!0,j.value="",u("Starte Status-Prüfung...");try{if("serviceWorker"in navigator){u("Service Worker API verfügbar");const e=await navigator.serviceWorker.getRegistration();e?(f.serviceWorker=!0,f.serviceWorkerDetails=`Aktiv (Scope: ${e.scope})`,u(`Service Worker registriert: ${e.scope}`),u(`SW State: ${((a=e.active)==null?void 0:a.state)||"unbekannt"}`)):(f.serviceWorker=!1,f.serviceWorkerDetails="Nicht registriert",u("Kein Service Worker registriert"))}else f.serviceWorker=!1,f.serviceWorkerDetails="Nicht unterstützt",u("Service Worker nicht unterstützt");if("Notification"in window?(f.notificationPermission=Notification.permission,u(`Benachrichtigungs-Berechtigung: ${Notification.permission}`)):(f.notificationPermission="nicht unterstützt",u("Notification API nicht unterstützt")),"serviceWorker"in navigator&&"PushManager"in window){u("PushManager API verfügbar");const e=await navigator.serviceWorker.getRegistration();if(e){const o=await e.pushManager.getSubscription();o?(f.pushSubscription=!0,f.pushSubscriptionDetails=`Aktiv (Endpoint: ${o.endpoint.substring(0,50)}...)`,u("Push-Abonnement aktiv"),u(`Endpoint: ${o.endpoint}`)):(f.pushSubscription=!1,f.pushSubscriptionDetails="Nicht abonniert",u("Kein Push-Abonnement vorhanden"))}}else f.pushSubscription=!1,f.pushSubscriptionDetails="Nicht unterstützt",u("PushManager nicht unterstützt");try{const e=await R.get("/push/vapid-public-key");e.vapidPublicKey?(f.vapidKey=!0,f.vapidKeyDetails=`Verfügbar (${e.vapidPublicKey.substring(0,20)}...)`,u("VAPID-Schlüssel vom Server erhalten")):(f.vapidKey=!1,f.vapidKeyDetails="Nicht konfiguriert",u("VAPID-Schlüssel nicht konfiguriert"))}catch(e){f.vapidKey=!1,f.vapidKeyDetails=`Fehler: ${e.message}`,u(`VAPID-Fehler: ${e.message}`)}u("Status-Prüfung abgeschlossen")}catch(e){u(`Fehler: ${e.message}`)}finally{x.value=!1}}async function de(){u("Fordere Benachrichtigungs-Berechtigung an...");try{const a=await Notification.requestPermission();f.notificationPermission=a,u(`Berechtigung: ${a}`),a==="granted"?(d.value="Berechtigung erteilt",h.value="success"):(d.value="Berechtigung verweigert",h.value="warning"),g.value=!0}catch(a){u(`Fehler: ${a.message}`),d.value="Fehler beim Anfordern",h.value="error",g.value=!0}}async function Se(){x.value=!0,u("Starte Push-Abonnement...");try{const{vapidPublicKey:a}=await R.get("/push/vapid-public-key");u("VAPID-Schlüssel erhalten");const e=await navigator.serviceWorker.ready;u("Service Worker bereit");const o=r(a),K=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o});u("Push-Abonnement erstellt"),u(`Endpoint: ${K.endpoint}`),await R.post("/push/subscribe",K.toJSON()),u("Abonnement an Server gesendet"),await y(),d.value="Push aktiviert",h.value="success",g.value=!0}catch(a){u(`Fehler: ${a.message}`),d.value="Fehler beim Aktivieren",h.value="error",g.value=!0}finally{x.value=!1}}async function c(){x.value=!0,u("Deaktiviere Push...");try{const a=await navigator.serviceWorker.getRegistration();if(a){const e=await a.pushManager.getSubscription();e&&(await e.unsubscribe(),u("Lokal abgemeldet"),await R.delete("/push/subscribe"),u("Vom Server entfernt"))}await y(),d.value="Push deaktiviert",h.value="success",g.value=!0}catch(a){u(`Fehler: ${a.message}`),d.value="Fehler beim Deaktivieren",h.value="error",g.value=!0}finally{x.value=!1}}async function s(){q.value=!0,u("Sende Test-Benachrichtigung...");try{await R.post("/push/test"),u("Test-Benachrichtigung gesendet"),d.value="Test gesendet",h.value="success",g.value=!0}catch(a){u(`Fehler: ${a.message}`),d.value="Fehler beim Senden",h.value="error",g.value=!0}finally{q.value=!1}}function r(a){const e="=".repeat((4-a.length%4)%4),o=(a+e).replace(/-/g,"+").replace(/_/g,"/"),K=window.atob(o),he=new Uint8Array(K.length);for(let ke=0;ke<K.length;++ke)he[ke]=K.charCodeAt(ke);return he}const l=$e(()=>{var o,K;const a=((o=M.user)==null?void 0:o.first_name)||"",e=((K=M.user)==null?void 0:K.last_name)||"";return[a,e].filter(Boolean).join(" ")});Ie(async()=>{M.user&&(F.value.notification_time=M.user.notification_time||"09:00",F.value.digest_filter=M.user.digest_filter||"overdue_and_today"),await $.fetchSpaces(),await y(),await i()});async function i(){try{const a=await R.get("/users/api-key");C.value=a.api_key}catch(a){console.error("Failed to fetch API key:",a)}}async function v(){I.value=!0;try{const a=await R.post("/users/api-key");C.value=a.api_key,H.value=!0,d.value="API-Schlüssel generiert",h.value="success",g.value=!0}catch(a){console.error("Failed to generate API key:",a),d.value="Fehler beim Generieren",h.value="error",g.value=!0}finally{I.value=!1}}async function p(){I.value=!0;try{await R.delete("/users/api-key"),C.value=null,H.value=!1,d.value="API-Schlüssel widerrufen",h.value="success",g.value=!0}catch(a){console.error("Failed to revoke API key:",a),d.value="Fehler beim Widerrufen",h.value="error",g.value=!0}finally{I.value=!1}}async function k(){if(C.value)try{await navigator.clipboard.writeText(C.value),d.value="Kopiert!",h.value="success",g.value=!0}catch{d.value="Kopieren fehlgeschlagen",h.value="error",g.value=!0}}async function _(){try{const a=await R.patch("/users/settings",F.value);M.user=a.user,d.value="Einstellungen gespeichert",h.value="success",g.value=!0}catch(a){console.error("Failed to save settings:",a),d.value="Fehler beim Speichern",h.value="error",g.value=!0}}function P(){var a,e;D.value.first_name=((a=M.user)==null?void 0:a.first_name)||"",D.value.last_name=((e=M.user)==null?void 0:e.last_name)||"",b.value=!0}async function T(){try{const a=await R.patch("/users/settings",{first_name:D.value.first_name,last_name:D.value.last_name});M.user=a.user,b.value=!1,d.value="Profil gespeichert",h.value="success",g.value=!0}catch(a){console.error("Failed to save profile:",a),d.value="Fehler beim Speichern",h.value="error",g.value=!0}}async function B(){if(z.value.trim())try{await $.createSpace(z.value),z.value="",S.value=!1,d.value="Space erstellt",h.value="success",g.value=!0}catch(a){console.error("Failed to create space:",a),d.value="Fehler beim Erstellen",h.value="error",g.value=!0}}async function ne(){if(N.value.trim())try{await $.joinSpace(N.value),N.value="",U.value=!1,d.value="Space beigetreten",h.value="success",g.value=!0}catch(a){console.error("Failed to join space:",a),d.value="Fehler beim Beitreten",h.value="error",g.value=!0}}async function ae(a){if(a===0)return;const e=[...$.spaces];[e[a-1],e[a]]=[e[a],e[a-1]],$.spaces=e,await G()}async function oe(a){if(a===$.spaces.length-1)return;const e=[...$.spaces];[e[a],e[a+1]]=[e[a+1],e[a]],$.spaces=e,await G()}async function G(){try{const a=$.spaces.map(e=>e.id);await R.post("/spaces/reorder",{space_ids:a})}catch(a){console.error("Failed to save space order:",a),d.value="Fehler beim Speichern der Reihenfolge",h.value="error",g.value=!0}}function W(){w.value=!0}async function Q(){w.value=!1,await M.logout(),ge.push("/login")}return(a,e)=>(Y(),Z(Ye,{class:"bg-background"},{default:n(()=>[t(Ue,{fluid:"",class:"pa-4"},{default:n(()=>[e[46]||(e[46]=A("h1",{class:"text-h5 font-weight-bold mb-4"},"Einstellungen",-1)),t(X,{variant:"outlined",class:"mb-3"},{default:n(()=>[t(re,{class:"d-flex align-center"},{default:n(()=>[e[18]||(e[18]=A("span",{class:"text-subtitle-1"},"Spaces",-1)),t(ce),t(V,{icon:"mdi-plus",size:"small",variant:"text",onClick:e[0]||(e[0]=o=>S.value=!0)}),t(V,{icon:"mdi-folder-lock-open-outline",size:"small",variant:"text",onClick:e[1]||(e[1]=o=>U.value=!0)})]),_:1}),t(we,{class:"pa-0",density:"compact"},{default:n(()=>[(Y(!0),Ae(He,null,je(fe($).spaces,(o,K)=>(Y(),Z(ve,{key:o.id,onClick:he=>fe(ge).push(`/spaces/${o.id}/settings`)},{prepend:n(()=>[A("div",rt,[t(V,{icon:"mdi-chevron-up",size:"x-small",variant:"text",density:"compact",disabled:K===0,onClick:Pe(he=>ae(K),["stop"])},null,8,["disabled","onClick"]),t(V,{icon:"mdi-chevron-down",size:"x-small",variant:"text",density:"compact",disabled:K===fe($).spaces.length-1,onClick:Pe(he=>oe(K),["stop"])},null,8,["disabled","onClick"])]),t(se,{icon:"mdi-folder",color:o.personal_color||"primary",size:"small"},null,8,["color"])]),append:n(()=>[o.role==="owner"?(Y(),Z(Je,{key:0,size:"x-small",color:"primary",variant:"tonal"},{default:n(()=>[...e[19]||(e[19]=[m(" Inhaber ",-1)])]),_:1})):ee("",!0),t(se,{icon:"mdi-chevron-right",size:"small",class:"ml-2"})]),default:n(()=>[t(me,{class:"text-body-2"},{default:n(()=>[m(J(o.personal_name||o.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),fe($).spaces.length===0?(Y(),Z(ie,{key:0,class:"text-center text-medium-emphasis"},{default:n(()=>[...e[20]||(e[20]=[m(" Keine Spaces vorhanden ",-1)])]),_:1})):ee("",!0)]),_:1}),t(X,{variant:"outlined",class:"mb-3"},{default:n(()=>[t(re,{class:"text-subtitle-1"},{default:n(()=>[...e[21]||(e[21]=[m("Konto",-1)])]),_:1}),t(we,{class:"pa-0"},{default:n(()=>[t(ve,null,{prepend:n(()=>[t(Re,{color:"primary",size:"48"},{default:n(()=>[t(se,{icon:"mdi-account",size:"24"})]),_:1})]),append:n(()=>[t(V,{icon:"mdi-pencil",variant:"text",size:"small",onClick:P})]),default:n(()=>[t(me,{class:"font-weight-medium"},{default:n(()=>[m(J(l.value||"Kein Name"),1)]),_:1}),t(ye,null,{default:n(()=>{var o;return[m(J((o=fe(M).user)==null?void 0:o.email),1)]}),_:1})]),_:1})]),_:1}),t(be,null,{default:n(()=>[t(V,{block:"",variant:"text",color:"error",onClick:W},{default:n(()=>[...e[22]||(e[22]=[m("Abmelden",-1)])]),_:1})]),_:1})]),_:1}),t(X,{variant:"outlined",class:"mb-3"},{default:n(()=>[t(re,{class:"text-subtitle-1"},{default:n(()=>[...e[23]||(e[23]=[m("Benachrichtigungen",-1)])]),_:1}),t(ie,null,{default:n(()=>[t(pe,{modelValue:F.value.notification_time,"onUpdate:modelValue":e[2]||(e[2]=o=>F.value.notification_time=o),label:"Tägliche Benachrichtigungszeit",type:"time",variant:"outlined",density:"compact","hide-details":"auto",hint:"Uhrzeit für tägliche Zusammenfassung","persistent-hint":"",onBlur:_,onChange:_},null,8,["modelValue"]),t(Ze,{modelValue:F.value.digest_filter,"onUpdate:modelValue":[e[3]||(e[3]=o=>F.value.digest_filter=o),_],items:[{value:"all",title:"Alle Aufgaben"},{value:"today_only",title:"Nur heute fällige Aufgaben"},{value:"overdue_and_today",title:"Überfällige und heute fällige Aufgaben"}],label:"Zusammenfassung anzeigen",variant:"outlined",density:"compact","hide-details":"",class:"mt-3"},null,8,["modelValue"])]),_:1})]),_:1}),t(_e,{class:"mb-3"},{default:n(()=>[t(Me,null,{default:n(()=>[t(qe,null,{default:n(()=>[A("div",it,[t(se,{icon:"mdi-cog",size:"small",class:"mr-2"}),e[24]||(e[24]=A("span",{class:"text-subtitle-1"},"Erweiterte Einstellungen",-1))])]),_:1}),t(De,null,{default:n(()=>[t(X,{variant:"outlined",class:"mb-3"},{default:n(()=>[t(re,{class:"d-flex align-center"},{default:n(()=>[e[25]||(e[25]=A("span",{class:"text-subtitle-1"},"Push-Benachrichtigungen",-1)),t(ce),t(V,{icon:"mdi-refresh",size:"small",variant:"text",onClick:y,loading:x.value},null,8,["loading"])]),_:1}),t(ie,null,{default:n(()=>[t(we,{density:"compact",class:"pa-0"},{default:n(()=>[t(ve,null,{prepend:n(()=>[t(se,{icon:f.serviceWorker?"mdi-check-circle":"mdi-close-circle",color:f.serviceWorker?"success":"error"},null,8,["icon","color"])]),default:n(()=>[t(me,null,{default:n(()=>[...e[26]||(e[26]=[m("Service Worker",-1)])]),_:1}),t(ye,null,{default:n(()=>[m(J(f.serviceWorkerDetails),1)]),_:1})]),_:1}),t(ve,null,{prepend:n(()=>[t(se,{icon:f.notificationPermission==="granted"?"mdi-check-circle":f.notificationPermission==="denied"?"mdi-close-circle":"mdi-help-circle",color:f.notificationPermission==="granted"?"success":f.notificationPermission==="denied"?"error":"warning"},null,8,["icon","color"])]),default:n(()=>[t(me,null,{default:n(()=>[...e[27]||(e[27]=[m("Benachrichtigungs-Berechtigung",-1)])]),_:1}),t(ye,null,{default:n(()=>[m(J(f.notificationPermission),1)]),_:1})]),_:1}),t(ve,null,{prepend:n(()=>[t(se,{icon:f.pushSubscription?"mdi-check-circle":"mdi-close-circle",color:f.pushSubscription?"success":"error"},null,8,["icon","color"])]),default:n(()=>[t(me,null,{default:n(()=>[...e[28]||(e[28]=[m("Push-Abonnement",-1)])]),_:1}),t(ye,null,{default:n(()=>[m(J(f.pushSubscriptionDetails),1)]),_:1})]),_:1}),t(ve,null,{prepend:n(()=>[t(se,{icon:f.vapidKey?"mdi-check-circle":"mdi-close-circle",color:f.vapidKey?"success":"error"},null,8,["icon","color"])]),default:n(()=>[t(me,null,{default:n(()=>[...e[29]||(e[29]=[m("VAPID-Schlüssel",-1)])]),_:1}),t(ye,null,{default:n(()=>[m(J(f.vapidKeyDetails),1)]),_:1})]),_:1})]),_:1}),t(Ge,{class:"my-3"}),A("div",st,[f.notificationPermission!=="granted"?(Y(),Z(V,{key:0,variant:"outlined",size:"small",onClick:de},{default:n(()=>[...e[30]||(e[30]=[m(" Berechtigung anfragen ",-1)])]),_:1})):ee("",!0),f.notificationPermission==="granted"&&!f.pushSubscription?(Y(),Z(V,{key:1,variant:"outlined",size:"small",color:"primary",onClick:Se,loading:x.value},{default:n(()=>[...e[31]||(e[31]=[m(" Push aktivieren ",-1)])]),_:1},8,["loading"])):ee("",!0),f.pushSubscription?(Y(),Z(V,{key:2,variant:"outlined",size:"small",color:"error",onClick:c,loading:x.value},{default:n(()=>[...e[32]||(e[32]=[m(" Push deaktivieren ",-1)])]),_:1},8,["loading"])):ee("",!0),f.pushSubscription?(Y(),Z(V,{key:3,variant:"outlined",size:"small",onClick:s,loading:q.value},{default:n(()=>[...e[33]||(e[33]=[m(" Test senden ",-1)])]),_:1},8,["loading"])):ee("",!0)]),t(_e,{class:"mt-3"},{default:n(()=>[t(Me,{title:"Debug-Log"},{default:n(()=>[t(De,null,{default:n(()=>[A("pre",lt,J(j.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{variant:"outlined",class:"mb-3"},{default:n(()=>[t(re,{class:"text-subtitle-1"},{default:n(()=>[...e[34]||(e[34]=[m("API-Schlüssel",-1)])]),_:1}),t(ie,null,{default:n(()=>[e[45]||(e[45]=A("p",{class:"text-body-2 text-medium-emphasis mb-3"}," Verwende diesen Schlüssel für externe Integrationen wie Apple Shortcuts, um Inbox-Einträge per Spracheingabe zu erstellen. ",-1)),C.value?(Y(),Ae("div",ut,[t(pe,{"model-value":H.value?C.value:"••••••••••••••••••••••••••••••••",readonly:"",variant:"outlined",density:"compact","hide-details":"",class:"flex-grow-1"},{"append-inner":n(()=>[t(V,{icon:H.value?"mdi-eye-off":"mdi-eye",variant:"text",size:"small",onClick:e[4]||(e[4]=o=>H.value=!H.value)},null,8,["icon"]),t(V,{icon:"mdi-content-copy",variant:"text",size:"small",onClick:k})]),_:1},8,["model-value"])])):ee("",!0),A("div",ot,[C.value?ee("",!0):(Y(),Z(V,{key:0,variant:"outlined",size:"small",color:"primary",onClick:v,loading:I.value},{default:n(()=>[...e[35]||(e[35]=[m(" Schlüssel generieren ",-1)])]),_:1},8,["loading"])),C.value?(Y(),Z(V,{key:1,variant:"outlined",size:"small",onClick:v,loading:I.value},{default:n(()=>[...e[36]||(e[36]=[m(" Neu generieren ",-1)])]),_:1},8,["loading"])):ee("",!0),C.value?(Y(),Z(V,{key:2,variant:"outlined",size:"small",color:"error",onClick:p,loading:I.value},{default:n(()=>[...e[37]||(e[37]=[m(" Widerrufen ",-1)])]),_:1},8,["loading"])):ee("",!0)]),t(_e,{class:"mt-3"},{default:n(()=>[t(Me,{title:"Apple Shortcuts Anleitung"},{default:n(()=>[t(De,null,{default:n(()=>[A("ol",dt,[e[42]||(e[42]=A("li",{class:"mb-2"},"Erstelle einen neuen Shortcut in der Shortcuts-App",-1)),e[43]||(e[43]=A("li",{class:"mb-2"},'Füge die Aktion "Text diktieren" hinzu',-1)),A("li",ct,[e[41]||(e[41]=m('Füge "URL-Inhalt abrufen" hinzu mit: ',-1)),A("ul",ft,[A("li",null,[e[38]||(e[38]=m("URL: ",-1)),A("code",null,J(le.value)+"/api/inbox",1)]),e[39]||(e[39]=A("li",null,"Methode: POST",-1)),e[40]||(e[40]=A("li",null,[m("Body: JSON mit "),A("code",null,"transcript"),m(", "),A("code",null,"space_id"),m(", "),A("code",null,"api_key")],-1))])])]),t(Qe,{type:"info",density:"compact",class:"mt-2"},{default:n(()=>[...e[44]||(e[44]=[m(" Space-ID findest du in den Space-Einstellungen ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{variant:"flat",class:"bg-grey-lighten-4"},{default:n(()=>[t(ie,{class:"text-center text-caption text-medium-emphasis"},{default:n(()=>[A("div",null,"Build: "+J(fe(ue))+" ("+J(O.value)+")",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(Xe,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o),color:h.value,timeout:2e3},{default:n(()=>[m(J(d.value),1)]),_:1},8,["modelValue","color"])]),_:1}),t(Ce,{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=o=>b.value=o),"max-width":"400"},{default:n(()=>[t(X,null,{default:n(()=>[t(re,{class:"text-h6"},{default:n(()=>[...e[47]||(e[47]=[m("Profil bearbeiten",-1)])]),_:1}),t(ie,null,{default:n(()=>[t(pe,{modelValue:D.value.first_name,"onUpdate:modelValue":e[6]||(e[6]=o=>D.value.first_name=o),label:"Vorname",variant:"outlined",density:"compact","hide-details":"",class:"mb-3"},null,8,["modelValue"]),t(pe,{modelValue:D.value.last_name,"onUpdate:modelValue":e[7]||(e[7]=o=>D.value.last_name=o),label:"Nachname",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(be,null,{default:n(()=>[t(V,{variant:"text",onClick:e[8]||(e[8]=o=>b.value=!1)},{default:n(()=>[...e[48]||(e[48]=[m("Abbrechen",-1)])]),_:1}),t(ce),t(V,{variant:"text",color:"primary",onClick:T},{default:n(()=>[...e[49]||(e[49]=[m("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ce,{modelValue:w.value,"onUpdate:modelValue":e[11]||(e[11]=o=>w.value=o),"max-width":"400"},{default:n(()=>[t(X,null,{default:n(()=>[t(re,{class:"text-h6"},{default:n(()=>[...e[50]||(e[50]=[m("Abmelden?",-1)])]),_:1}),t(ie,null,{default:n(()=>[...e[51]||(e[51]=[m(" Möchten Sie sich wirklich abmelden? ",-1)])]),_:1}),t(be,null,{default:n(()=>[t(ce),t(V,{variant:"text",onClick:e[10]||(e[10]=o=>w.value=!1)},{default:n(()=>[...e[52]||(e[52]=[m("Abbrechen",-1)])]),_:1}),t(V,{variant:"text",color:"error",onClick:Q},{default:n(()=>[...e[53]||(e[53]=[m("Abmelden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Te,{modelValue:S.value,"onUpdate:modelValue":e[14]||(e[14]=o=>S.value=o)},{default:n(()=>[t(X,null,{default:n(()=>[t(re,null,{default:n(()=>[...e[54]||(e[54]=[m("Neuer Space",-1)])]),_:1}),t(ie,null,{default:n(()=>[t(pe,{modelValue:z.value,"onUpdate:modelValue":e[12]||(e[12]=o=>z.value=o),label:"Name",variant:"outlined",autofocus:"",onKeyup:Fe(B,["enter"])},null,8,["modelValue"])]),_:1}),t(be,null,{default:n(()=>[t(V,{variant:"text",onClick:e[13]||(e[13]=o=>S.value=!1)},{default:n(()=>[...e[55]||(e[55]=[m("Abbrechen",-1)])]),_:1}),t(ce),t(V,{variant:"text",color:"primary",onClick:B},{default:n(()=>[...e[56]||(e[56]=[m("Erstellen",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Te,{modelValue:U.value,"onUpdate:modelValue":e[17]||(e[17]=o=>U.value=o)},{default:n(()=>[t(X,null,{default:n(()=>[t(re,null,{default:n(()=>[...e[57]||(e[57]=[m("Space beitreten",-1)])]),_:1}),t(ie,null,{default:n(()=>[t(pe,{modelValue:N.value,"onUpdate:modelValue":e[15]||(e[15]=o=>N.value=o),label:"Einladungscode",variant:"outlined",autofocus:"",onKeyup:Fe(ne,["enter"])},null,8,["modelValue"])]),_:1}),t(be,null,{default:n(()=>[t(V,{variant:"text",onClick:e[16]||(e[16]=o=>U.value=!1)},{default:n(()=>[...e[58]||(e[58]=[m("Abbrechen",-1)])]),_:1}),t(ce),t(V,{variant:"text",color:"primary",onClick:ne},{default:n(()=>[...e[59]||(e[59]=[m("Beitreten",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},gt=We(vt,[["__scopeId","data-v-aca0b2c6"]]);export{gt as default};
