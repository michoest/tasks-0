import{_ as Y,r as C,x as K,v as P,c as T,o as d,w as o,b as r,f as Z,E as s,m as te,p as h,a0 as _,J as f,h as c,t as g,C as m,l as y,L as H,M as V,F as L,G as R,S as J,a7 as q,W as G,a8 as ke,a9 as _e,T as $e,A as we}from"./index-YNptfV--.js";const De={class:"sheet-header"},Se={class:"task-options"},Ce={class:"option-label"},xe={class:"option-label"},be={class:"option-label"},he={key:0,class:"option-label"},Ve={class:"task-sections"},Te={class:"section-content"},ze={class:"pill-grid"},Ie=["onClick"],Me={class:"section-content"},Oe={class:"pill-grid"},Ne=["onClick"],Be={class:"section-content"},Fe={class:"pill-grid mb-3"},Ae={key:0,class:"date-section"},We={class:"quick-dates"},Ue={key:1,class:"interval-section"},Ee={class:"interval-row"},He={class:"mt-2"},Je={key:2,class:"schedule-section"},qe={class:"schedule-type-row"},Le={key:0,class:"weekday-grid"},Re=["onClick"],Ke={key:1,class:"monthday-grid"},Pe=["onClick"],Qe={key:3,class:"time-section"},je={class:"progress-section"},Ye={class:"progress-header"},Ze={class:"progress-value"},Ge=["value"],Xe={class:"progress-actions"},et={class:"notes-section"},tt={class:"notes-input-wrapper"},lt={class:"sheet-footer"},st={__name:"TaskDialog",props:{modelValue:Boolean,task:Object,categories:{type:Array,default:()=>[]},spaces:{type:Array,default:()=>[]},defaultSpaceId:Number,initialTitle:{type:String,default:""}},emits:["update:modelValue","save"],setup(u,{emit:S}){const p=u,z=S,A=C(null),$=C(!1),x=C(!1),b=C(!1),D=C(!1),w=C(!1),i=C("weekly"),a=C([]),v=C([]),t=C(M()),B=K(()=>t.value.space_id?p.categories.filter(l=>l.space_id===t.value.space_id):p.categories);function M(){var l;return{title:p.initialTitle||"",description:"",space_id:p.defaultSpaceId||((l=p.spaces[0])==null?void 0:l.id)||null,category_id:null,recurrence_type:"no_date",interval_days:1,interval_exclude_weekends:!1,has_specific_time:!1,time_of_day:"09:00",next_due_date:I(),progress:null}}function I(){return new Date().toISOString().split("T")[0]}function O(l){l==="space"?($.value=!$.value,x.value=!1,b.value=!1):l==="categories"?(x.value=!x.value,$.value=!1,b.value=!1):l==="recurrence"&&(b.value=!b.value,$.value=!1,x.value=!1)}function F(){D.value=!D.value,D.value&&t.value.progress===null&&(t.value.progress=0)}function Q(){t.value.progress=null,D.value=!1}function le(l){t.value.space_id=l,B.value.find(n=>n.id===t.value.category_id)||(t.value.category_id=null)}function se(){const l=p.spaces.find(e=>e.id===t.value.space_id);return(l==null?void 0:l.personal_name)||(l==null?void 0:l.name)||"Space"}function ae(){const l=p.spaces.find(e=>e.id===t.value.space_id);return(l==null?void 0:l.personal_color)||"primary"}function ne(){if(!t.value.category_id)return"Kategorie";const l=p.categories.find(e=>e.id===t.value.category_id);return(l==null?void 0:l.name)||"Kategorie"}function ie(){if(!t.value.category_id)return"grey";const l=p.categories.find(e=>e.id===t.value.category_id);return(l==null?void 0:l.color)||"grey"}function oe(){if(!t.value.category_id)return"mdi-tag";const l=p.categories.find(e=>e.id===t.value.category_id);return(l==null?void 0:l.icon)||"mdi-tag"}function re(){switch(t.value.recurrence_type){case"no_date":return"mdi-infinity";case"one_time":return"mdi-calendar";case"interval":return"mdi-refresh";case"schedule":return"mdi-calendar-clock";default:return"mdi-calendar"}}function ue(){return t.value.recurrence_type==="no_date"?"grey":"primary"}function de(){switch(t.value.recurrence_type){case"no_date":return"Irgendwann";case"one_time":return t.value.next_due_date?ce(t.value.next_due_date):"Datum wählen";case"interval":return`Alle ${t.value.interval_days}d`;case"schedule":return i.value==="weekly"&&a.value.length>0?`${a.value.length}x/Woche`:i.value==="monthly"&&v.value.length>0?`${v.value.length}x/Monat`:"Zeitplan";default:return"Datum"}}function ce(l){const e=new Date(l),n=new Date,k=new Date(n);return k.setDate(k.getDate()+1),l===n.toISOString().split("T")[0]?"Heute":l===k.toISOString().split("T")[0]?"Morgen":`${["So","Mo","Di","Mi","Do","Fr","Sa"][e.getDay()]}, ${e.getDate()}.${e.getMonth()+1}.`}function j(l){const e=new Date;l==="today"?t.value.next_due_date=e.toISOString().split("T")[0]:l==="tomorrow"?(e.setDate(e.getDate()+1),t.value.next_due_date=e.toISOString().split("T")[0]):l==="nextWeek"&&(e.setDate(e.getDate()+7),t.value.next_due_date=e.toISOString().split("T")[0])}function ve(l){const e=a.value.indexOf(l);e===-1?a.value.push(l):a.value.splice(e,1)}function pe(l){const e=v.value.indexOf(l);e===-1?v.value.push(l):v.value.splice(e,1)}P(()=>p.modelValue,l=>{l&&(p.task?fe(p.task):(t.value=M(),t.value.title=p.initialTitle||"",a.value=[],v.value=[],$.value=!1,x.value=!1,b.value=!1,D.value=!1,w.value=!1))}),P(()=>p.initialTitle,l=>{p.modelValue&&!p.task&&(t.value.title=l||"")});function fe(l){if(t.value={title:l.title||"",description:l.description||"",space_id:l.space_id||p.defaultSpaceId,category_id:l.category_id||null,recurrence_type:l.recurrence_type||"no_date",interval_days:l.interval_days||1,interval_exclude_weekends:!!l.interval_exclude_weekends,has_specific_time:!!l.has_specific_time,time_of_day:l.time_of_day||"09:00",next_due_date:l.next_due_date||I(),progress:l.progress!==void 0?l.progress:null},l.schedule_pattern)try{const e=JSON.parse(l.schedule_pattern);i.value=e.type||"weekly",a.value=e.weekdays||[],v.value=e.days||[]}catch(e){console.error("Failed to parse schedule:",e)}w.value=!!l.description,D.value=l.progress!==null&&l.progress!==void 0}function X(){z("update:modelValue",!1)}function me(l){var n,k;const e=new Date;if(e.setHours(0,0,0,0),l.type==="weekly"&&((n=l.weekdays)!=null&&n.length)){const W=[...l.weekdays].sort((N,ee)=>N-ee),U=new Date(e);for(let N=0;N<8;N++){if(W.includes(U.getDay()))return U.toISOString().split("T")[0];U.setDate(U.getDate()+1)}}if(l.type==="monthly"&&((k=l.days)!=null&&k.length)){const W=[...l.days].sort((E,ge)=>E-ge),U=e.getDate(),N=W.find(E=>E>=U);if(N){const E=new Date(e.getFullYear(),e.getMonth(),N);if(E.getDate()===N)return E.toISOString().split("T")[0]}return new Date(e.getFullYear(),e.getMonth()+1,W[0]).toISOString().split("T")[0]}return e.toISOString().split("T")[0]}function ye(){if(!t.value.title.trim())return;const l={title:t.value.title.trim(),description:t.value.description||null,space_id:t.value.space_id,category_id:t.value.category_id||null,recurrence_type:t.value.recurrence_type,has_specific_time:t.value.has_specific_time?1:0,time_of_day:t.value.has_specific_time?t.value.time_of_day:null,progress:t.value.progress};if(t.value.recurrence_type==="no_date")l.next_due_date=null;else if(t.value.recurrence_type==="one_time")l.next_due_date=t.value.next_due_date;else if(t.value.recurrence_type==="interval")l.interval_days=t.value.interval_days,l.interval_exclude_weekends=t.value.interval_exclude_weekends?1:0,l.next_due_date=t.value.next_due_date;else if(t.value.recurrence_type==="schedule"){const e={type:i.value};if(i.value==="weekly"){if(a.value.length===0){alert("Bitte mindestens einen Wochentag wählen");return}e.weekdays=a.value.sort((n,k)=>n-k)}else{if(v.value.length===0){alert("Bitte mindestens einen Tag wählen");return}e.days=v.value.sort((n,k)=>n-k)}l.schedule_pattern=JSON.stringify(e),l.next_due_date=me(e)}z("save",l),X()}return(l,e)=>(d(),T(G,{"model-value":u.modelValue,"onUpdate:modelValue":e[28]||(e[28]=n=>l.$emit("update:modelValue",n)),scrollable:""},{default:o(()=>[r(Z,{class:"task-dialog-card"},{default:o(()=>[s("div",De,[r(te,{ref_key:"titleRef",ref:A,modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.title=n),placeholder:"Aufgabe...",variant:"plain",density:"comfortable","hide-details":"",autofocus:"",class:"title-input"},null,8,["modelValue"]),r(h,{icon:"mdi-close",variant:"text",size:"small",onClick:X,class:"close-btn"})]),s("div",Se,[s("div",{class:_(["option-pill",{"option-active":$.value}]),onClick:e[1]||(e[1]=n=>O("space"))},[r(f,{size:"18",color:ae()},{default:o(()=>[...e[29]||(e[29]=[c("mdi-folder",-1)])]),_:1},8,["color"]),s("span",Ce,g(se()),1)],2),s("div",{class:_(["option-pill",{"option-active":x.value}]),onClick:e[2]||(e[2]=n=>O("categories"))},[r(f,{size:"18",color:ie(),icon:oe()},null,8,["color","icon"]),s("span",xe,g(ne()),1)],2),s("div",{class:_(["option-pill",{"option-active":b.value}]),onClick:e[3]||(e[3]=n=>O("recurrence"))},[r(f,{size:"18",color:ue()},{default:o(()=>[c(g(re()),1)]),_:1},8,["color"]),s("span",be,g(de()),1)],2),s("div",{class:_(["option-pill",{"option-active":D.value||t.value.progress!==null}]),onClick:F},[r(f,{size:"16",color:t.value.progress!==null?"primary":void 0},{default:o(()=>[...e[30]||(e[30]=[c("mdi-percent",-1)])]),_:1},8,["color"]),t.value.progress!==null?(d(),m("span",he,g(Math.round(t.value.progress*100))+"%",1)):y("",!0)],2),s("div",{class:_(["option-pill",{"option-active":w.value}]),onClick:e[4]||(e[4]=n=>w.value=!w.value)},[r(f,{size:"16"},{default:o(()=>[...e[31]||(e[31]=[c("mdi-note-text-outline",-1)])]),_:1})],2)]),s("div",Ve,[r(H,null,{default:o(()=>[V(s("div",Te,[s("div",ze,[(d(!0),m(L,null,R(u.spaces,n=>(d(),m("div",{key:n.id,class:_(["selectable-pill",{"pill-selected":t.value.space_id===n.id}]),onClick:k=>le(n.id)},[r(f,{size:"16",color:n.personal_color||"primary"},{default:o(()=>[...e[32]||(e[32]=[c("mdi-folder",-1)])]),_:1},8,["color"]),s("span",null,g(n.personal_name||n.name),1)],10,Ie))),128))])],512),[[J,$.value]])]),_:1}),r(H,null,{default:o(()=>[V(s("div",Me,[s("div",Oe,[s("div",{class:_(["selectable-pill",{"pill-selected":!t.value.category_id}]),onClick:e[5]||(e[5]=n=>t.value.category_id=null)},[r(f,{size:"16",color:"grey"},{default:o(()=>[...e[33]||(e[33]=[c("mdi-tag-off",-1)])]),_:1}),e[34]||(e[34]=s("span",null,"Keine",-1))],2),(d(!0),m(L,null,R(B.value,n=>(d(),m("div",{key:n.id,class:_(["selectable-pill",{"pill-selected":t.value.category_id===n.id}]),onClick:k=>t.value.category_id=n.id},[r(f,{size:"16",color:n.color},{default:o(()=>[c(g(n.icon||"mdi-tag"),1)]),_:2},1032,["color"]),s("span",null,g(n.name),1)],10,Ne))),128))])],512),[[J,x.value]])]),_:1}),r(H,null,{default:o(()=>[V(s("div",Be,[s("div",Fe,[s("div",{class:_(["selectable-pill",{"pill-selected":t.value.recurrence_type==="no_date"}]),onClick:e[6]||(e[6]=n=>t.value.recurrence_type="no_date")},[r(f,{size:"16"},{default:o(()=>[...e[35]||(e[35]=[c("mdi-infinity",-1)])]),_:1}),e[36]||(e[36]=s("span",null,"Irgendwann",-1))],2),s("div",{class:_(["selectable-pill",{"pill-selected":t.value.recurrence_type==="one_time"}]),onClick:e[7]||(e[7]=n=>t.value.recurrence_type="one_time")},[r(f,{size:"16"},{default:o(()=>[...e[37]||(e[37]=[c("mdi-calendar",-1)])]),_:1}),e[38]||(e[38]=s("span",null,"Einmalig",-1))],2),s("div",{class:_(["selectable-pill",{"pill-selected":t.value.recurrence_type==="interval"}]),onClick:e[8]||(e[8]=n=>t.value.recurrence_type="interval")},[r(f,{size:"16"},{default:o(()=>[...e[39]||(e[39]=[c("mdi-refresh",-1)])]),_:1}),e[40]||(e[40]=s("span",null,"Intervall",-1))],2),s("div",{class:_(["selectable-pill",{"pill-selected":t.value.recurrence_type==="schedule"}]),onClick:e[9]||(e[9]=n=>t.value.recurrence_type="schedule")},[r(f,{size:"16"},{default:o(()=>[...e[41]||(e[41]=[c("mdi-calendar-clock",-1)])]),_:1}),e[42]||(e[42]=s("span",null,"Zeitplan",-1))],2)]),t.value.recurrence_type==="one_time"?(d(),m("div",Ae,[s("div",We,[s("div",{class:"date-chip",onClick:e[10]||(e[10]=n=>j("today"))},"Heute"),s("div",{class:"date-chip",onClick:e[11]||(e[11]=n=>j("tomorrow"))},"Morgen"),s("div",{class:"date-chip",onClick:e[12]||(e[12]=n=>j("nextWeek"))},"Nächste Woche")]),V(s("input",{"onUpdate:modelValue":e[13]||(e[13]=n=>t.value.next_due_date=n),type:"date",class:"date-input"},null,512),[[q,t.value.next_due_date]])])):y("",!0),t.value.recurrence_type==="interval"?(d(),m("div",Ue,[s("div",Ee,[e[44]||(e[44]=s("span",{class:"interval-label"},"Alle",-1)),V(s("input",{"onUpdate:modelValue":e[14]||(e[14]=n=>t.value.interval_days=n),type:"number",min:"1",class:"interval-input"},null,512),[[q,t.value.interval_days,void 0,{number:!0}]]),e[45]||(e[45]=s("span",{class:"interval-label"},"Tage",-1)),s("div",{class:_(["interval-toggle",{"toggle-active":t.value.interval_exclude_weekends}]),onClick:e[15]||(e[15]=n=>t.value.interval_exclude_weekends=!t.value.interval_exclude_weekends)},[r(f,{size:"14"},{default:o(()=>[...e[43]||(e[43]=[c("mdi-briefcase-off",-1)])]),_:1})],2)]),s("div",He,[e[46]||(e[46]=s("span",{class:"text-caption text-medium-emphasis"},"Start:",-1)),V(s("input",{"onUpdate:modelValue":e[16]||(e[16]=n=>t.value.next_due_date=n),type:"date",class:"date-input ml-2"},null,512),[[q,t.value.next_due_date]])])])):y("",!0),t.value.recurrence_type==="schedule"?(d(),m("div",Je,[s("div",qe,[s("div",{class:_(["schedule-type-pill",{"type-selected":i.value==="weekly"}]),onClick:e[17]||(e[17]=n=>i.value="weekly")}," Woche ",2),s("div",{class:_(["schedule-type-pill",{"type-selected":i.value==="monthly"}]),onClick:e[18]||(e[18]=n=>i.value="monthly")}," Monat ",2)]),i.value==="weekly"?(d(),m("div",Le,[(d(),m(L,null,R(["Mo","Di","Mi","Do","Fr","Sa","So"],(n,k)=>s("div",{key:k,class:_(["weekday-chip",{"day-selected":a.value.includes(k===6?0:k+1)}]),onClick:W=>ve(k===6?0:k+1)},g(n),11,Re)),64))])):y("",!0),i.value==="monthly"?(d(),m("div",Ke,[(d(),m(L,null,R(31,n=>s("div",{key:n,class:_(["monthday-chip",{"day-selected":v.value.includes(n)}]),onClick:k=>pe(n)},g(n),11,Pe)),64))])):y("",!0)])):y("",!0),["one_time","interval","schedule"].includes(t.value.recurrence_type)?(d(),m("div",Qe,[s("div",{class:_(["time-toggle",{"toggle-active":t.value.has_specific_time}]),onClick:e[19]||(e[19]=n=>t.value.has_specific_time=!t.value.has_specific_time)},[r(f,{size:"16"},{default:o(()=>[...e[47]||(e[47]=[c("mdi-clock-outline",-1)])]),_:1}),e[48]||(e[48]=s("span",null,"Uhrzeit",-1))],2),t.value.has_specific_time?V((d(),m("input",{key:0,"onUpdate:modelValue":e[20]||(e[20]=n=>t.value.time_of_day=n),type:"time",class:"time-input"},null,512)),[[q,t.value.time_of_day]]):y("",!0)])):y("",!0)],512),[[J,b.value]])]),_:1})]),r(H,null,{default:o(()=>[V(s("div",je,[s("div",Ye,[e[49]||(e[49]=s("span",{class:"progress-label"},"Fortschritt",-1)),s("span",Ze,g(t.value.progress!==null?Math.round(t.value.progress*100):0)+"%",1)]),s("input",{type:"range",min:"0",max:"100",value:t.value.progress!==null?Math.round(t.value.progress*100):0,onInput:e[21]||(e[21]=n=>t.value.progress=n.target.value/100),class:"progress-slider"},null,40,Ge),s("div",Xe,[s("div",{class:"progress-preset",onClick:e[22]||(e[22]=n=>t.value.progress=0)},"0%"),s("div",{class:"progress-preset",onClick:e[23]||(e[23]=n=>t.value.progress=.25)},"25%"),s("div",{class:"progress-preset",onClick:e[24]||(e[24]=n=>t.value.progress=.5)},"50%"),s("div",{class:"progress-preset",onClick:e[25]||(e[25]=n=>t.value.progress=.75)},"75%"),s("div",{class:"progress-preset",onClick:e[26]||(e[26]=n=>t.value.progress=1)},"100%"),s("div",{class:"progress-remove",onClick:Q},[r(f,{size:"14"},{default:o(()=>[...e[50]||(e[50]=[c("mdi-close",-1)])]),_:1}),e[51]||(e[51]=c(" Entfernen ",-1))])])],512),[[J,D.value]])]),_:1}),r(H,null,{default:o(()=>[V(s("div",et,[s("div",tt,[V(s("textarea",{"onUpdate:modelValue":e[27]||(e[27]=n=>t.value.description=n),placeholder:"Notizen...",class:"notes-input",rows:"3"},null,512),[[q,t.value.description]])])],512),[[J,w.value]])]),_:1}),s("div",lt,[r(h,{block:"",color:"primary",size:"large",disabled:!t.value.title.trim(),onClick:ye},{default:o(()=>[c(g(u.task?"Speichern":"Erstellen"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model-value"]))}},Ot=Y(st,[["__scopeId","data-v-f90f5067"]]),at={class:"quick-add-content"},nt={class:"quick-add-actions"},it={__name:"QuickAddSheet",props:{modelValue:{type:Boolean,required:!0},defaultSpaceId:{type:Number,default:null}},emits:["update:modelValue","add-inbox","open-full"],setup(u,{emit:S}){const p=u,z=S,A=C(null),$=C("");P(()=>p.modelValue,async D=>{var w;D&&(await _e(),(w=A.value)==null||w.focus())});function x(){$.value.trim()&&(z("add-inbox",{title:$.value.trim(),space_id:p.defaultSpaceId}),$.value="",z("update:modelValue",!1))}function b(){const D=$.value.trim();$.value="",z("update:modelValue",!1),z("open-full",D)}return(D,w)=>(d(),T(G,{"model-value":u.modelValue,"onUpdate:modelValue":w[1]||(w[1]=i=>D.$emit("update:modelValue",i))},{default:o(()=>[r(Z,{class:"quick-add-card"},{default:o(()=>[s("div",at,[r(te,{ref_key:"inputRef",ref:A,modelValue:$.value,"onUpdate:modelValue":w[0]||(w[0]=i=>$.value=i),placeholder:"Was liegt dir auf dem Herzen?",variant:"plain",density:"comfortable","hide-details":"",autofocus:"",class:"quick-add-input",onKeydown:ke(x,["enter"])},null,8,["modelValue"]),s("div",nt,[r(h,{variant:"text",color:"medium-emphasis",onClick:b},{default:o(()=>[r(f,{start:""},{default:o(()=>[...w[2]||(w[2]=[c("mdi-tag-plus",-1)])]),_:1})]),_:1}),r(h,{variant:"tonal",color:"primary",disabled:!$.value.trim(),onClick:x,icon:"mdi-inbox-arrow-down"},null,8,["disabled"])])])]),_:1})]),_:1},8,["model-value"]))}},Nt=Y(it,[["__scopeId","data-v-36d16d34"]]),ot={class:"sheet-header"},rt={class:"sheet-title-row"},ut={class:"sheet-title"},dt={class:"sheet-meta"},ct={key:0,class:"meta-chip"},vt={key:1,class:"meta-chip"},pt={key:2,class:"meta-chip"},ft={key:3,class:"meta-chip"},mt={key:4,class:"meta-chip"},yt={key:0,class:"sheet-stats"},gt={class:"stats-row"},kt={class:"stats-days"},_t=["title"],$t={class:"day-letter"},wt={key:2,class:"day-dot"},Dt={class:"stats-summary"},St={key:0,class:"text-caption text-medium-emphasis"},Ct={key:0},xt={key:1,class:"sheet-progress"},bt={class:"progress-header"},ht={class:"progress-value"},Vt={class:"progress-bar"},Tt={key:2,class:"sheet-description"},zt={class:"sheet-actions"},It={__name:"TaskActionSheet",props:{modelValue:Boolean,task:Object,showSpaceName:{type:Boolean,default:!0},showHistory:{type:Boolean,default:!0}},emits:["update:modelValue","complete","skip","postpone","edit","history","delete"],setup(u){const S=u,p=C(null);P(()=>{var i;return[S.modelValue,(i=S.task)==null?void 0:i.id]},async([i,a])=>{var v;if(i&&a&&((v=S.task)==null?void 0:v.task_type)==="recurring")try{const t=await we.get(`/spaces/${S.task.space_id}/tasks/${a}/stats`);p.value=t}catch(t){console.error("Failed to fetch task stats:",t),p.value=null}else p.value=null},{immediate:!0});const z=K(()=>{var t,B;const i=[],a=["So","Mo","Di","Mi","Do","Fr","Sa"],v=new Date;for(let M=6;M>=0;M--){const I=new Date(v);I.setDate(I.getDate()-M);const O=I.toISOString().split("T")[0],F=(B=(t=p.value)==null?void 0:t.stats)==null?void 0:B.find(Q=>Q.date===O);i.push({date:O,letter:a[I.getDay()],status:F?F.skipped?"skipped":"completed":"none",completedBy:F?`${F.first_name||""} ${F.last_name||""}`.trim():null})}return i});function A(i){return{"stat-completed":i.status==="completed","stat-skipped":i.status==="skipped","stat-none":i.status==="none"}}function $(i){return i.status==="completed"?i.completedBy?`Erledigt von ${i.completedBy}`:"Erledigt":i.status==="skipped"?"Übersprungen":i.date}const x=K(()=>S.task?S.task.task_type==="recurring":!1),b=K(()=>S.task?S.task.recurrence_type==="one_time"&&S.task.next_due_date:!1);function D(i){if(!i)return"";const a=new Date(i),v=new Date,t=new Date(v);t.setDate(t.getDate()+1);const B=v.toISOString().split("T")[0],M=t.toISOString().split("T")[0];if(i===B)return"Heute";if(i===M)return"Morgen";const I=["So","Mo","Di","Mi","Do","Fr","Sa"],O=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"];return`${I[a.getDay()]}, ${a.getDate()}. ${O[a.getMonth()]}`}function w(i){if(i.recurrence_type==="interval"){const a=i.interval_days||1;return`Alle ${a} Tag${a>1?"e":""}`}if(i.recurrence_type==="schedule")try{const a=JSON.parse(i.schedule_pattern);if(a.type==="weekly")return"Wöchentlich";if(a.type==="monthly")return"Monatlich"}catch{}return"Wiederholend"}return(i,a)=>(d(),T(G,{"model-value":u.modelValue,"onUpdate:modelValue":a[7]||(a[7]=v=>i.$emit("update:modelValue",v)),scrollable:""},{default:o(()=>[u.task?(d(),T(Z,{key:0,class:"action-sheet-card"},{default:o(()=>[s("div",ot,[s("div",rt,[u.task.category?(d(),T(f,{key:0,color:u.task.category.color,icon:u.task.category.icon||"mdi-tag",class:"mr-2"},null,8,["color","icon"])):y("",!0),s("span",ut,g(u.task.title),1)]),r(h,{icon:"mdi-close",variant:"text",size:"small",onClick:a[0]||(a[0]=v=>i.$emit("update:modelValue",!1))})]),s("div",dt,[u.showSpaceName&&u.task.space_name?(d(),m("div",ct,[r(f,{size:"14",color:u.task.space_color||"grey"},{default:o(()=>[...a[8]||(a[8]=[c("mdi-folder",-1)])]),_:1},8,["color"]),s("span",null,g(u.task.space_name),1)])):y("",!0),u.task.category?(d(),m("div",vt,[r(f,{size:"14",color:u.task.category.color,icon:u.task.category.icon||"mdi-tag"},null,8,["color","icon"]),s("span",null,g(u.task.category.name),1)])):y("",!0),u.task.next_due_date?(d(),m("div",pt,[r(f,{size:"14"},{default:o(()=>[...a[9]||(a[9]=[c("mdi-calendar",-1)])]),_:1}),s("span",null,g(D(u.task.next_due_date)),1)])):y("",!0),u.task.has_specific_time?(d(),m("div",ft,[r(f,{size:"14"},{default:o(()=>[...a[10]||(a[10]=[c("mdi-clock-outline",-1)])]),_:1}),s("span",null,g(u.task.time_of_day),1)])):y("",!0),u.task.task_type==="recurring"?(d(),m("div",mt,[r(f,{size:"14"},{default:o(()=>[...a[11]||(a[11]=[c("mdi-refresh",-1)])]),_:1}),s("span",null,g(w(u.task)),1)])):y("",!0)]),u.task.task_type==="recurring"?(d(),m("div",yt,[a[14]||(a[14]=s("div",{class:"stats-label"},"Letzte 7 Tage",-1)),s("div",gt,[s("div",kt,[(d(!0),m(L,null,R(z.value,(v,t)=>(d(),m("div",{key:t,class:_(["stat-day",A(v)]),title:$(v)},[s("span",$t,g(v.letter),1),v.status==="completed"?(d(),T(f,{key:0,size:"12",color:"success"},{default:o(()=>[...a[12]||(a[12]=[c("mdi-check",-1)])]),_:1})):v.status==="skipped"?(d(),T(f,{key:1,size:"12",color:"warning"},{default:o(()=>[...a[13]||(a[13]=[c("mdi-debug-step-over",-1)])]),_:1})):(d(),m("span",wt))],10,_t))),128))]),s("div",Dt,[p.value?(d(),m("span",St,[c(g(p.value.summary.completed)+" erledigt ",1),p.value.summary.skipped?(d(),m("span",Ct,", "+g(p.value.summary.skipped)+" übersprungen",1)):y("",!0)])):y("",!0)])])])):y("",!0),u.task.progress!==null&&u.task.progress!==void 0?(d(),m("div",xt,[s("div",bt,[a[15]||(a[15]=s("span",{class:"progress-label"},"Fortschritt",-1)),s("span",ht,g(Math.round(u.task.progress*100))+"%",1)]),s("div",Vt,[s("div",{class:"progress-fill",style:$e({width:`${u.task.progress*100}%`})},null,4)])])):y("",!0),u.task.description?(d(),m("div",Tt,g(u.task.description),1)):y("",!0),s("div",zt,[r(h,{variant:"tonal",color:"success",onClick:a[1]||(a[1]=v=>i.$emit("complete"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[16]||(a[16]=[c("mdi-check",-1)])]),_:1}),a[17]||(a[17]=c(" Erledigen ",-1))]),_:1}),x.value?(d(),T(h,{key:0,variant:"tonal",onClick:a[2]||(a[2]=v=>i.$emit("skip"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[18]||(a[18]=[c("mdi-debug-step-over",-1)])]),_:1}),a[19]||(a[19]=c(" Überspringen ",-1))]),_:1})):y("",!0),b.value?(d(),T(h,{key:1,variant:"tonal",onClick:a[3]||(a[3]=v=>i.$emit("postpone"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[20]||(a[20]=[c("mdi-calendar-clock",-1)])]),_:1}),a[21]||(a[21]=c(" Verschieben ",-1))]),_:1})):y("",!0),r(h,{variant:"tonal",onClick:a[4]||(a[4]=v=>i.$emit("edit"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[22]||(a[22]=[c("mdi-pencil",-1)])]),_:1}),a[23]||(a[23]=c(" Bearbeiten ",-1))]),_:1}),u.showHistory?(d(),T(h,{key:2,variant:"tonal",onClick:a[5]||(a[5]=v=>i.$emit("history"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[24]||(a[24]=[c("mdi-chart-timeline-variant",-1)])]),_:1}),a[25]||(a[25]=c(" Verlauf ",-1))]),_:1})):y("",!0),r(h,{variant:"tonal",color:"error",onClick:a[6]||(a[6]=v=>i.$emit("delete"))},{default:o(()=>[r(f,{start:""},{default:o(()=>[...a[26]||(a[26]=[c("mdi-delete",-1)])]),_:1}),a[27]||(a[27]=c(" Löschen ",-1))]),_:1})])]),_:1})):y("",!0)]),_:1},8,["model-value"]))}},Bt=Y(It,[["__scopeId","data-v-31fb81e4"]]);export{Nt as Q,Bt as T,Ot as a};
