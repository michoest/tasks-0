import{ap as h,r as l,A as n}from"./index-D-dTlJmf.js";const g=h("spaces",()=>{const s=l([]),c=l(null),u=l(!1);async function r(){u.value=!0;try{const e=await n.get("/spaces");s.value=e.spaces}finally{u.value=!1}}async function o(e){u.value=!0;try{const a=await n.get(`/spaces/${e}`);return c.value=a.space,a}finally{u.value=!1}}async function f(e){const a=await n.post("/spaces",{name:e});return s.value.unshift(a.space),a.space}async function v(e,a){var i;const t=await n.patch(`/spaces/${e}`,{name:a}),p=s.value.findIndex(w=>w.id===e);return p!==-1&&(s.value[p]=t.space),((i=c.value)==null?void 0:i.id)===e&&(c.value=t.space),t.space}async function y(e){var a;await n.delete(`/spaces/${e}`),s.value=s.value.filter(t=>t.id!==e),((a=c.value)==null?void 0:a.id)===e&&(c.value=null)}async function S(e){const a=await n.post("/spaces/join",{inviteCode:e});return s.value.unshift(a.space),a.space}async function d(e){var a;await n.post(`/spaces/${e}/leave`),s.value=s.value.filter(t=>t.id!==e),((a=c.value)==null?void 0:a.id)===e&&(c.value=null)}return{spaces:s,currentSpace:c,loading:u,fetchSpaces:r,fetchSpace:o,createSpace:f,updateSpace:v,deleteSpace:y,joinSpace:S,leaveSpace:d}});export{g as u};
